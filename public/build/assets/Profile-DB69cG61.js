var o=Object.defineProperty;var c=(r,t,a)=>t in r?o(r,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[t]=a;var d=(r,t,a)=>c(r,typeof t!="symbol"?t+"":t,a);import{r as m,R as h,j as e,U as u}from"./app-MQ-yEurC.js";import{E as p}from"./EachMethod-DlQbtg5B.js";import{S as x}from"./sweetalert2.esm.all-DPJM2oV6.js";import{h as f}from"./moment-C5S46NFB.js";import"./index-FTPeQx5Q.js";import{D as b}from"./DashboardLayout-Q83-rxtQ.js";import"./index-B9Tcu3qw.js";import{W as j}from"./react-webcam-C_JsNYoc.js";import{I as v}from"./ImageCrop-BhIjMigO.js";import"./Dropdown-DtFVle0_.js";import"./transition-CQN9Mefa.js";import"./index-DzSybp8L.js";class L extends m.Component{constructor(a){super(a);d(this,"getBase64",(a,l)=>{let s=new FileReader;s.readAsDataURL(a),s.onload=function(){l(s.result)},s.onerror=function(i){console.log("Error: ",i)}});d(this,"onFileChange",a=>{if($(".progress-bar").css("width","0%"),a.target.files.length){const{name:l,type:s}=a.target.files[0];let i="pdf";s=="application/pdf"?i="pdf":s=="application/vnd.openxmlformats-officedocument.wordprocessingml.document"||s=="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"?i="docs":(s=="image/png"||s=="image/jpeg")&&(i="image"),this.getBase64(a.target.files[0],n=>{this.setState({photoupload:n,filedata:n,filedataName:l,filetype:s,filetype_:i})}),$("#fileuploadpanel").modal("show")}});this.state={dashboard_url:"/admin/dashboard",photoupload:"",photobase64:"",photobase64final:"",id:"",teacher_id:"",lrn:"",psa_cert_no:"",qrcode:"",first_name:"",last_name:"",middle_name:"",extension_name:"",sex:"",bdate:"",status:"",email:"",contact_list:[],filedata:null,filedataName:"",filetype:"",filetype_:"",cameraOn:!1,bdate_max:f(new Date).subtract("years",15).format("YYYY-MM-DD")},this.webCam=h.createRef(),this.updateCrop=this.updateCrop.bind(this),this._isMounted=!1}componentDidMount(){let a=this.state.dashboard_url;this.props.auth.user.user_type=="Admin"?a="/admin/dashboard":this.props.auth.user.user_type=="Teacher"?a="/teacher/dashboard":this.props.auth.user.user_type=="Student"?a="/student/dashboard":this.props.auth.user.user_type=="Guardian"&&(a="/guardian/dashboard"),this.setState({dashboard_url:a}),$("#tabs a").on("click",function(l){l.preventDefault(),$(this).tab("show")})}updateCrop(a){this.setState({photobase64final:a})}render(){return e.jsxs(b,{title:"My Profile",user:this.props.auth.user,children:[e.jsxs("div",{className:"noselect",children:[e.jsx("div",{className:"app-content-header",children:e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("h3",{className:"mb-0",children:[e.jsx("i",{className:"nav-icon bi bi-person-lines-fill"})," Profile"]})}),e.jsx("div",{className:"col-sm-6",children:e.jsx("ol",{className:"breadcrumb float-sm-end",children:e.jsxs("li",{className:"breadcrumb-item",children:[e.jsx("i",{className:"bi bi-speedometer mr-2"}),e.jsx(u,{href:`${this.state.dashboard_url}`,children:"Dashboard"})]})})})]})})}),e.jsx("div",{className:"app-content",children:e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-3",children:e.jsx("div",{className:"card card-info card-outline mb-3",children:e.jsxs("div",{className:"card-body box-profile",children:[e.jsx("div",{className:"center mb-3 ",children:e.jsx("img",{className:"user-image rounded-circle img-fluid img-circle auto-margin-lr shadow",src:this.state.photobase64final!=""?this.state.photobase64final:"/adminlte/dist/assets/img/avatar.png",ref:a=>this.upload_view_image=a,onError:a=>{this.upload_view_image.src="/adminlte/dist/assets/img/avatar.png"},alt:"User profile picture"})}),e.jsx("h3",{className:"profile-username text-center",children:this.props.auth.user.fullname}),e.jsx("p",{className:"text-muted text-center",children:this.props.auth.user.user_type}),e.jsxs("ul",{className:"list-group list-group-unbordered mb-3",children:[e.jsxs("li",{className:"list-group-item",children:[e.jsx("b",{children:"Advisory"})," ",e.jsx("a",{className:"float-right",children:"0"})]}),e.jsxs("li",{className:"list-group-item",children:[e.jsx("b",{children:"Students"})," ",e.jsx("a",{className:"float-right",children:"0"})]})]})]})})}),e.jsx("div",{className:"col-md-9",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header p-2",children:e.jsxs("ul",{id:"tabs",className:"nav nav-pills",role:"tablist",children:[e.jsx("li",{className:"nav-item",children:e.jsx("a",{className:"nav-link active",href:"#profiles","data-toggle":"tab",children:"Profile"})}),e.jsx("li",{className:"nav-item",children:e.jsx("a",{className:"nav-link ",href:"#activity","data-toggle":"tab",children:"Activity"})}),e.jsx("li",{className:"nav-item",children:e.jsx("a",{className:"nav-link",href:"#settings","data-toggle":"tab",children:"Settings"})})]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"tab-content",children:[e.jsx("div",{className:"tab-pane active",id:"profiles",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-lg-12",children:[e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{htmlFor:"lrn",className:"form-label ",children:"Profile Picture"}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"file",className:"form-control",id:"inputGroupFile02",onChange:this.onFileChange}),e.jsx("span",{className:"input-group-text",htmlFor:"inputGroupFile02",onClick:()=>{this.setState({cameraOn:!0}),$("#camerapanel").modal("show")},children:e.jsx("i",{className:"bi bi-camera"})})]})]}),e.jsxs("div",{className:"col-md-8 d-flex flex-column justify-content-end",children:[e.jsx("label",{htmlFor:"lrn",className:"form-label ",children:"Identification Number"}),e.jsx("input",{type:"text",className:"form-control",id:"lrn",defaultValue:this.state.qr_code,required:"",onChange:a=>{$("#lrn-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({lrn:a.target.value})}}),e.jsx("span",{id:"lrn-alert",className:"valid-feedback",children:"Looks good!"})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{htmlFor:"first_name",className:"form-label",children:"First name"}),e.jsx("input",{type:"text",className:"form-control",id:"first_name",defaultValue:this.state.first_name,required:"",onChange:a=>{$("#first-name-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({first_name:a.target.value})}}),e.jsx("div",{id:"first-name-alert",className:"valid-feedback",children:"Looks good!"})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{htmlFor:"middle_name",className:"form-label",children:"Middle name"}),e.jsx("input",{type:"text",className:"form-control",id:"middle_name",defaultValue:this.state.middle_name,required:"",onChange:a=>{$("#middle-name-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({middle_name:a.target.value})}}),e.jsx("div",{id:"middle-name-alert",className:"valid-feedback",children:"Looks good!"})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{htmlFor:"last_name",className:"form-label",children:"Last name"}),e.jsx("input",{type:"text",className:"form-control",id:"last_name",defaultValue:this.state.last_name,required:"",onChange:a=>{$("#last-name-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({last_name:a.target.value})}}),e.jsx("div",{id:"last-name-alert",className:"valid-feedback",children:"Looks good!"})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{htmlFor:"extension_name",className:"form-label",children:"Extension name"}),e.jsxs("select",{className:"form-select",id:"extension_name",required:"",value:this.state.extension_name,onChange:a=>{$("#extension-name-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({extension_name:a.target.value})},children:[e.jsx("option",{disabled:!0,children:"Choose..."}),e.jsx("option",{}),e.jsx("option",{children:"Jr."}),e.jsx("option",{children:"Sr."}),e.jsx("option",{children:"II"}),e.jsx("option",{children:"III"}),e.jsx("option",{children:"VI"}),e.jsx("option",{children:"V"})]}),e.jsx("div",{id:"extension-name-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{htmlFor:"gender",className:"form-label",children:"Gender"}),e.jsxs("select",{className:"form-select",id:"gender",required:"",value:this.state.sex,onChange:a=>{$("#sex-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({sex:a.target.value})},children:[e.jsx("option",{disabled:!0,children:"Choose..."}),e.jsx("option",{}),e.jsx("option",{children:"Male"}),e.jsx("option",{children:"Female"})]}),e.jsx("div",{id:"sex-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{htmlFor:"bdate",className:"form-label",children:"Birth Date"}),e.jsx("input",{type:"date",className:"form-control",id:"bdate",defaultValue:this.state.bdate,required:"",max:this.state.bdate_max,onChange:a=>{$("#bdate-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({bdate:a.target.value})}}),e.jsx("div",{id:"bdate-alert",className:"valid-feedback",children:"Looks good!"})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{htmlFor:"bdate",className:"form-label",children:"Email"}),e.jsx("input",{type:"email",className:"form-control",id:"bdate",defaultValue:this.state.email,required:"",onChange:a=>{$("#email-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({email:a.target.value})}}),e.jsx("div",{id:"email-alert",className:"valid-feedback",children:"Looks good!"})]})]}),e.jsxs("div",{className:"col-lg-12",children:[e.jsx("hr",{}),e.jsx("h5",{className:"badge fs-5 bg-primary text-start d-block",children:"Contacts"}),e.jsx("div",{className:"row",children:e.jsx(p,{of:this.state.contact_list,render:(a,l)=>e.jsxs("div",{className:"input-group ",children:[e.jsx("div",{className:"input-group-prepend col-lg-4",children:e.jsx("div",{htmlFor:"lglv",className:"input-group-text",children:a.phone_number})}),e.jsx("button",{className:"btn btn-danger",onClick:()=>{},children:"Remove"})]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:`${this.state.contact_list.length>0?"form-inline col-lg-6 pt-2":"form-inline col-lg-6"}`,children:e.jsxs("div",{className:"input-group",children:[e.jsx("div",{className:"input-group-prepend",children:e.jsx("div",{htmlFor:"lglv",className:"input-group-text",children:"Phone Number : "})}),e.jsx("input",{type:"number",className:"form-control col-2",id:"phonenumber",maxLength:12,defaultValue:"",placeholder:"09000000000",required:""}),e.jsx("button",{className:"btn btn-primary",onClick:()=>{let a=this.state.contact_list,l=$("#phonenumber").val();l!=""&&a.some(s=>s.phone_number==l)==!1?(a.push({id:this.state.id,type:null,student_id:null,teacher_id:this.state.teacher_id,guardian_id:null,phone_number:$("#phonenumber").val(),telephone_number:null,status:""}),this.setState({contact_list:a})):l!=""&&x.fire({title:"Sorry already added",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0})},children:"Save"})]})})})]}),e.jsx("div",{className:"col-12 pt-3",children:e.jsxs("div",{className:"form-check float-right",children:[e.jsx("br",{}),e.jsx("input",{className:"form-check-input",type:"checkbox",defaultValue:"",id:"invalidCheck",required:""}),e.jsx("label",{className:"form-check-label",htmlFor:"invalidCheck",children:"Agree to all fields are correct"}),e.jsx("div",{id:"invalidCheck-alert",className:"invalid-feedback",children:"You must agree before submitting."})]})})]})})}),e.jsx("div",{className:"tab-pane ",id:"activity",children:"a"}),e.jsx("div",{className:"tab-pane",id:"settings",children:"c"})]})})]})})]})})})]}),e.jsx("div",{className:"modal fade",tabIndex:"-1",role:"dialog",id:"fileuploadpanel","data-bs-backdrop":"static",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title fs-5",children:"Image"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsx("div",{className:"modal-body",children:e.jsx(v,{src:this.state.photoupload,onChange:this.updateCrop})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})})]})})}),e.jsx("div",{className:"modal fade",tabIndex:"-1",role:"dialog",id:"camerapanel","data-bs-backdrop":"static",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title fs-5",children:"Camera Capture"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsx("div",{className:"modal-body",children:this.state.cameraOn==!0?e.jsx(j,{className:"webcam",audio:!1,screenshotFormat:"image/jpeg",videoConstraints:{width:600,height:600,facingMode:"user"},mirrored:!0,screenshotQuality:1,imageSmoothing:!0,ref:this.webCam}):null}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>{try{this.setState({photoupload:this.webCam.current.getScreenshot({width:400,height:400}),cameraOn:!1},()=>{$("#camerapanel").modal("hide"),$("#fileuploadpanel").modal("show")})}catch{alert("Pleasse try again")}},children:"Capture"})]})]})})})]})}}export{L as default};
