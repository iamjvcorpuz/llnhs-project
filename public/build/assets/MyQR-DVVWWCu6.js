import{r as p,j as o}from"./app-MQ-yEurC.js";import{S as l}from"./sweetalert2.esm.all-DPJM2oV6.js";import"./index-FTPeQx5Q.js";import{D as c}from"./DashboardLayout-Q83-rxtQ.js";import"./jspdf.plugin.autotable-CWwcz3KB.js";import{Q as h}from"./browser-Bt5TlLty.js";import"./Dropdown-DtFVle0_.js";import"./transition-CQN9Mefa.js";import"./index-DzSybp8L.js";import"./typeof-QjJsDpFa.js";class O extends p.Component{constructor(e){super(e),this.state={qrcode:"",code:"",lrn:"",picture:"",fullname1:"",lastname:"",track_strand:"",grade:"",section:"",sy:"",guardianname:"",relationship:"",guardiancontact:"",address:"",list:[]},this.singleId=this.singleId.bind(this),console.log(this.props)}componentDidMount(){try{let e=typeof this.props.data.track.filter(t=>t.name==this.props.data.student.flsh_track).acronyms<"u"?this.props.data.track.filter(t=>t.name==this.props.data.student.flsh_track).acronyms:"",s=typeof this.props.data.strand.filter(t=>t.name==this.props.data.student.flsh_strand).acronyms<"u"?this.props.data.strand.filter(t=>t.name==this.props.data.student.flsh_strand).acronyms:"",i=this.props.data.getSchoolStats!=null&&this.props.data.getSchoolStats.length>0?this.props.data.getSchoolStats[0].track:"",r=this.props.data.getSchoolStats!=null&&this.props.data.getSchoolStats.length>0?this.props.data.getSchoolStats[0].strand:"",a=this.props.data.track.length>0?this.props.data.track.find(t=>`${t.name} (${t.acronyms})`===i):"",n=this.props.data.strand.length>0?this.props.data.strand.find(t=>`${t.name} (${t.acronyms})`===r):"";this.setState({code:this.props.data.student.qr_code,lrn:this.props.data.student.lrn,picture:this.props.data.student.picture_base64,fullname1:this.props.data.student.first_name+" "+this.props.data.student.middle_name,lastname:this.props.data.student.last_name,track_strand:e+"-"+s,guardianname:this.props.data.guardian[0].first_name+" "+this.props.data.guardian[0].middle_name+" "+this.props.data.guardian[0].last_name,relationship:this.props.data.guardian[0].relationship,guardiancontact:this.props.data.guardian[0].phone_number,address:this.props.data.guardian[0].current_address,grade:this.props.data.getSchoolStats!=null&&this.props.data.getSchoolStats.length>0?this.props.data.getSchoolStats[0].grade:"",level:this.props.data.getSchoolStats!=null&&this.props.data.getSchoolStats.length>0?this.props.data.getSchoolStats[0].grade_level:"",section:this.props.data.getSchoolStats!=null&&this.props.data.getSchoolStats.length>0?this.props.data.getSchoolStats[0].section:"",_track:typeof a<"u"&&a!=null?a.acronyms:"",_strand:typeof n<"u"&&n!=null?n.acronyms:"",sy:this.props.data.getSchoolStats!=null&&this.props.data.getSchoolStats.length>0?this.props.data.getSchoolStats[0].sy:""},()=>{this.singleId()})}catch(e){console.log(e),l.fire({title:"Cannot continue because info is not completed",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Download",cancelButtonText:"Close",icon:"error",showLoaderOnConfirm:!1,closeOnClickOutside:!1,dangerMode:!0}).then(s=>{})}}async singleId(){try{let e=this,s="";await(async r=>{try{s=await h.toDataURL(r,{errorCorrectionLevel:"H",width:500}),e.setState({qrcode:s})}catch(a){console.error(a)}})(this.state.lrn)}catch(e){console.log(e),l.fire({title:"Cannot continue because info is not completed",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Download",cancelButtonText:"Close",icon:"error",showLoaderOnConfirm:!1,closeOnClickOutside:!1,dangerMode:!0}).then(s=>{})}}browser_check_preview(){let e=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,s=typeof InstallTrigger<"u",i=/constructor/i.test(window.HTMLElement)||function(d){return d.toString()==="[object SafariRemoteNotification]"}(!window.safari||typeof safari<"u"&&safari.pushNotification),r=!!document.documentMode,a=!r&&!!window.StyleMedia,n=!!window.chrome&&(!!window.chrome.webstore||!!window.chrome.runtime),t=(n||e)&&!!window.CSS;return e?0:s||i?1:0}render(){return o.jsx(c,{title:"ID",user:this.props.auth.user,profile:this.props.auth.profile,children:o.jsx("div",{className:"noselect",children:o.jsx("div",{className:"my-qr-code ",children:o.jsxs("div",{className:"my-qr-code-content",children:[o.jsx("div",{className:"center",children:o.jsx("strong",{children:this.state.fullname1.toLocaleUpperCase()})}),o.jsx("img",{src:this.state.qrcode,className:"mx-auto"})]})})})})}}export{O as default};
