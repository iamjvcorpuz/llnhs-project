import{r as N,j as b}from"./app-MQ-yEurC.js";import{S as W}from"./sweetalert2.esm.all-DPJM2oV6.js";import"./index-FTPeQx5Q.js";import"./Dropdown-DtFVle0_.js";import"./index-DzSybp8L.js";import{E as P}from"./jspdf.plugin.autotable-CWwcz3KB.js";import{Q as I}from"./browser-Bt5TlLty.js";import"./transition-CQN9Mefa.js";import"./typeof-QjJsDpFa.js";class A extends N.Component{constructor(o){super(o),this.state={code:"",lrn:"",picture:"",fullname1:"",lastname:"",track_strand:"",grade:"",section:"",sy:"",guardianname:"",relationship:"",guardiancontact:"",address:"",student_list:this.props.data.student,guardian:this.props.data.guardian,strand:this.props.data.strand,track:this.props.data.track},$("body").attr("class",""),this.multiple=this.multiple.bind(this),console.log(this.props)}componentDidMount(){$("#frame1").height(0),W.fire({title:"Generating ID. Please wait.",showCancelButton:!1,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Download",cancelButtonText:"Close",icon:"info",showLoaderOnConfirm:!1,closeOnClickOutside:!1,dangerMode:!0,didOpen:()=>{W.showLoading()}}),setTimeout(()=>{this.generateQRCODES(()=>{this.multiple()})},2e3)}generateQRCODES(o){let r=[],e=this;const p=async(i,l)=>{try{l(await I.toDataURL(i,{errorCorrectionLevel:"H",margin:1}))}catch(c){console.error(c),l("")}};this.state.student_list.forEach(async(i,l,c)=>{await p(i.lrn,m=>{r.push({...i,gen_qr:m}),l+1==c.length&&e.setState({student_list:r},()=>{o()})})})}async multiple(){try{let o=this,r="";const e=new P({orientation:"landscape"}),p=async(a,z,y,g,h)=>{try{r=await I.toDataURL(a,{errorCorrectionLevel:"H",margin:1}),e.addImage(r,z,y,g,h)}catch(f){console.error(f)}};let i=1,l=1,c=0,m=0;this.state.student_list.forEach(async(a,z,y)=>{let g=o.state.track.find(t=>t.name==a.flsh_track),h=o.state.strand.find(t=>t.name==a.flsh_strand),f=typeof g<"u"?g.acronyms:"",k=typeof h<"u"?h.acronyms:"",G=a.qr_code,u=a.lrn,d=a.photo,n=a.first_name+" "+a.middle_name,s=a.last_name,x=f!=""||f!=""?f+"-"+k:"",C=o.state.guardian.find(t=>t.student_id==a.student_id).first_name+" "+o.state.guardian.find(t=>t.student_id==a.student_id).middle_name+" "+o.state.guardian.find(t=>t.student_id==a.student_id).last_name,F=o.state.guardian.find(t=>t.student_id==a.student_id).relationship,L=o.state.guardian.find(t=>t.student_id==a.student_id).phone_number,w=o.state.guardian.find(t=>t.student_id==a.student_id).current_address,_=a.grade,E=a.grade_level,U=a.section,T=a.flsh_track,R=a.flsh_strand,S=a.sy;if(i==1){i++,e.addImage("/images/id/front.png","PNG",5,10,54,88),e.addImage("/images/id/back.png","PNG",60,10,54,88),e.addImage(a.gen_qr,7.7,57,18,18),d!=""&&e.addImage(d,"PNG",7.5,26.5,26,25),e.setFont("helvetica","bold"),e.setTextColor(255,255,255),e.setFontSize(11),e.text(u.toLocaleUpperCase(),17,55,{align:"left",color:"white"}),e.setFont("helvetica","normal"),e.setFontSize(11),n.length>=11&&e.setFontSize(8),e.text(n.toLocaleUpperCase(),28,60,{align:"left",maxWidth:50}),e.setFont("helvetica","bold"),e.setFontSize(15);let t=66;n.length>=18&&(t=68),s.length>10&&(e.setFontSize(10),t=64),s.length>13&&e.setFontSize(7),e.text(s.toLocaleUpperCase(),28,t,{align:"left",maxWidth:50}),e.setFont("helvetica","normal"),e.setFontSize(9),e.text(x.toLocaleUpperCase(),28,72,{align:"left",maxWidth:50}),e.setFont("helvetica","bold"),e.setFontSize(7),e.text(_.toLocaleUpperCase()+"-"+U.toLocaleUpperCase(),76,30,{align:"center",maxWidth:45}),e.text(S.toLocaleUpperCase(),94,30,{align:"left",maxWidth:50}),e.setFont("helvetica","normal"),e.setFontSize(8),e.text(C.toLocaleUpperCase(),63,43.5,{align:"left",maxWidth:80}),e.text(F.toLocaleUpperCase(),63,46,{align:"left",maxWidth:50}),e.text(L.toLocaleUpperCase(),63,49,{align:"left",maxWidth:70}),e.text(w.toLocaleUpperCase(),63,52,{align:"left",maxWidth:79})}else if(i==2){i++,e.addImage("/images/id/front.png","PNG",120,10,54,88),e.addImage("/images/id/back.png","PNG",175,10,54,88),e.addImage(a.gen_qr,122.5,57,18,18),d!=""&&e.addImage(d,"PNG",122.4,26.5,26,25),e.setFont("helvetica","bold"),e.setTextColor(255,255,255),e.setFontSize(11),e.text(u.toLocaleUpperCase(),132,55,{align:"left",color:"white"}),e.setFont("helvetica","normal"),e.setFontSize(11),n=n+"a",n.length>=11&&e.setFontSize(8),e.text(n.toLocaleUpperCase(),143,60,{align:"left",maxWidth:50}),e.setFont("helvetica","bold"),e.setFontSize(15);let t=66;n.length>=11&&(t=68),s.length>10&&(e.setFontSize(10),t=64),s.length>13&&e.setFontSize(7),e.text(s.toLocaleUpperCase(),143,t,{align:"left",maxWidth:50}),e.setFont("helvetica","normal"),e.setFontSize(8),e.text(x.toLocaleUpperCase(),143,72,{align:"left",maxWidth:50}),e.setFont("helvetica","bold"),e.setFontSize(7),e.text(_.toLocaleUpperCase()+"-"+U.toLocaleUpperCase(),76,30,{align:"center",maxWidth:45}),e.text(S.toLocaleUpperCase(),94,30,{align:"left",maxWidth:50}),e.setFont("helvetica","normal"),e.setFontSize(8),e.text(C.toLocaleUpperCase(),177,43.5,{align:"left",maxWidth:80}),e.text(F.toLocaleUpperCase(),177,46,{align:"left",maxWidth:50}),e.text(L.toLocaleUpperCase(),177,49,{align:"left",maxWidth:70}),e.text(w.toLocaleUpperCase(),177,52,{align:"left",maxWidth:79})}else if(i==3){i++,e.addImage("/images/id/front.png","PNG",5,106,54,88),e.addImage("/images/id/back.png","PNG",60,106,54,88),e.addImage(a.gen_qr,7.7,153,18,18),d!=""&&e.addImage(d,"PNG",7.5,122.5,26,25),e.setFont("helvetica","bold"),e.setTextColor(255,255,255),e.setFontSize(11),e.text(u.toLocaleUpperCase(),17,151,{align:"left",color:"white"}),e.setFont("helvetica","normal"),e.setFontSize(11),n.length>=11&&e.setFontSize(8),e.text(n.toLocaleUpperCase(),28,156,{align:"left",maxWidth:50}),e.setFont("helvetica","bold"),e.setFontSize(15);let t=161;n.length>=18&&(t=165),s.length<14&&(e.setFontSize(15),t=161),e.text(s.toLocaleUpperCase(),28,t,{align:"left",maxWidth:50}),e.setFont("helvetica","normal"),e.setFontSize(9),e.text(x.toLocaleUpperCase(),28,168,{align:"left",maxWidth:50}),e.setFont("helvetica","bold"),e.setFontSize(7),e.text(_.toLocaleUpperCase()+"-"+U.toLocaleUpperCase(),76,126,{align:"center",maxWidth:45}),e.text(S.toLocaleUpperCase(),94,126,{align:"left",maxWidth:50}),e.setFont("helvetica","normal"),e.setFontSize(8),e.text(C.toLocaleUpperCase(),63,139.5,{align:"left",maxWidth:80}),e.text(F.toLocaleUpperCase(),63,142,{align:"left",maxWidth:50}),e.text(L.toLocaleUpperCase(),63,145,{align:"left",maxWidth:70}),e.text(w.toLocaleUpperCase(),63,148,{align:"left",maxWidth:79})}else if(i==4){i++,l++,e.addImage("/images/id/front.png","PNG",120,106,54,88),e.addImage("/images/id/back.png","PNG",175,106,54,88),e.addImage(a.gen_qr,122.5,153,18,18),d!=""&&e.addImage(d,"PNG",122.4,122.5,26,25),e.setFont("helvetica","bold"),e.setTextColor(255,255,255),e.setFontSize(11),e.text(u.toLocaleUpperCase(),132,151,{align:"left",color:"white"}),e.setFont("helvetica","normal"),e.setFontSize(11),n.length>=11&&e.setFontSize(8),e.text(n.toLocaleUpperCase(),143,156,{align:"left",maxWidth:50}),e.setFont("helvetica","bold"),e.setFontSize(15);let t=161;n.length>=18&&(t=165),s.length<14&&(e.setFontSize(15),t=161),e.text(s.toLocaleUpperCase(),143,t,{align:"left",maxWidth:50}),e.setFont("helvetica","normal"),e.setFontSize(8),e.text(x.toLocaleUpperCase(),143,168,{align:"left",maxWidth:50}),e.setFont("helvetica","bold"),e.setFontSize(7),e.text(_.toLocaleUpperCase()+"-"+U.toLocaleUpperCase(),76,126,{align:"center",maxWidth:45}),e.text(S.toLocaleUpperCase(),94,126,{align:"left",maxWidth:50}),e.setFont("helvetica","normal"),e.setFontSize(8),e.text(C.toLocaleUpperCase(),177,139.5,{align:"left",maxWidth:80}),e.text(F.toLocaleUpperCase(),177,142,{align:"left",maxWidth:50}),e.text(L.toLocaleUpperCase(),177,145,{align:"left",maxWidth:70}),e.text(w.toLocaleUpperCase(),177,148,{align:"left",maxWidth:79})}i==5&&(i=1,z+1!=y.length&&e.addPage())}),console.log(e.output().length>=1e6,e.output().length),setTimeout(()=>{$("#frame1").height(window.innerHeight-8),W.close(),$("#frame1").attr("src",e.output("bloburl"))},1e3)}catch(o){console.log(o),W.fire({title:"Cannot continue because data is not sufficient or has error",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Download",cancelButtonText:"Close",icon:"error",showLoaderOnConfirm:!1,closeOnClickOutside:!1,dangerMode:!0}).then(r=>{})}}browser_check_preview(){let o=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,r=typeof InstallTrigger<"u",e=/constructor/i.test(window.HTMLElement)||function(m){return m.toString()==="[object SafariRemoteNotification]"}(!window.safari||typeof safari<"u"&&safari.pushNotification),p=!!document.documentMode,i=!p&&!!window.StyleMedia,l=!!window.chrome&&(!!window.chrome.webstore||!!window.chrome.runtime),c=(l||o)&&!!window.CSS;return o?0:r||e?1:0}render(){return b.jsx("div",{className:"",children:b.jsx("iframe",{id:"frame1",src:"#view=FitH&toolbar=0",width:"100%",height:"100%",className:""})})}}export{A as default};
