import{r as f,j as e,U as m}from"./app-MQ-yEurC.js";import{S as l}from"./sweetalert2.esm.all-DPJM2oV6.js";import{R as h}from"./ReactTable-CiiRreiS.js";import{D as b}from"./DashboardLayout-Q83-rxtQ.js";import"./index-FTPeQx5Q.js";import"./Dropdown-DtFVle0_.js";import"./transition-CQN9Mefa.js";import"./index-DzSybp8L.js";class O extends f.Component{constructor(a){super(a),this.state={data:this.props.classroom,data_users:[],columns:[{id:"no",accessor:"index",Header:"No.",width:50,className:"center"},{id:"room",Header:"Room",accessor:"room_number",className:"center",width:126},{id:"floor",Header:"Floor",width:126,accessor:"floor_number"},{id:"building",Header:"Building No.",width:100,accessor:"building_no",className:"center"},{id:"description",Header:"Description",width:300,accessor:"description",className:"center"},{id:"action",Header:"Action",width:100,accessor:"index",className:"center",Cell:({row:s})=>e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"btn btn-danger btn-block btn-sm col-12 mb-1",onClick:()=>{this.delete(s.original.id)},children:[" ",e.jsx("i",{className:"bi bi-person-fill-x"})," Remove"]}),e.jsxs("button",{onClick:()=>{$("#uroom").val(""),$("#ufloor").val(""),$("#ubuilding").val(""),$("#udescription").val(""),this.selectSubject(s.original)},className:"btn btn-primary btn-block btn-sm col-12 mb-1",children:[" ",e.jsx("i",{className:"bi bi-pen"})," Edit"]})]})}],id:"",room_no:"",floor_no:"",building_no:"",description:"",selectedData:{}},console.log(this.props),this.delete=this.delete.bind(this),this.selectSubject=this.selectSubject.bind(this),this.getAllData=this.getAllData.bind(this)}componentDidMount(){this.getAllData()}selectSubject(a){$("#uroom").val(a.room_number),$("#ufloor").val(a.floor_number),$("#ubuilding").val(a.building_no),$("#udescription").val(a.description),this.setState({selectedData:a},()=>{$("#updateClassroom").modal("show")})}getAllData(){let a=this;axios.get("/classroom").then(function(s){if(console.log(s),typeof s.status<"u"&&s.status=="200"){let i=typeof s.data<"u"&&typeof s.data<"u"?s.data:{};Object.keys(i).length>0?a.setState({data:i}):a.setState({data:[]})}})}saveData(){let a=this,s=$("#room").val(),i=$("#floor").val(),o=$("#building").val(),d=$("#description").val();s!=""?l.fire({title:"If all fields are correct and please click to continue to save",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Continue",icon:"warning",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(n=>{if(n.isConfirmed){l.fire({title:`Saving Records.
Please wait.`,html:'<i class="fa fa-times-circle-o"></i>&nbsp;&nbsp;Close',showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,didOpen:()=>{l.showLoading()}});let r={rooom_no:s,floor_no:i,building_no:o,description:d};console.log(r),axios.post("/classroom",r).then(async function(t){console.log(t),typeof t.status<"u"&&t.status=="201"?(typeof t.data<"u"&&typeof t.data<"u"?t.data:{}).status=="success"?l.fire({title:"Successfuly save!",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Continue",icon:"success",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(function(u){u.isConfirmed&&(l.close(),$("#newClassRoom").modal("hide"),a.getAllData())}):l.fire({title:"Fail to save",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!1,closeOnClickOutside:!1,dangerMode:!0}):typeof t.status<"u"&&t.status=="200"?(typeof t.data<"u"&&typeof t.data<"u"?t.data:{}).status=="data_exist"&&l.fire({title:"Data Exist",cancelButtonText:"Ok",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}):typeof t.status<"u"&&t.status=="422"}).catch(function(t){console.log(t),l.fire({title:"Server Error",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0})})}else n.isDismissed;return!1}):(subject_name==""&&($("#subject_name-alert").removeAttr("class"),$("#subject_name-alert").html("Required Field"),$("#subject_name-alert").addClass("d-block invalid-feedback")),d==""&&($("#description-alert").removeAttr("class"),$("#description-alert").html("Required Field"),$("#description-alert").addClass("d-block invalid-feedback")))}updateData(){let a=this,s=$("#uroom").val(),i=$("#ufloor").val(),o=$("#ubuilding").val(),d=$("#udescription").val();s!=""?l.fire({title:"If all fields are correct and please click to continue to save",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Continue",icon:"warning",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(n=>{if(n.isConfirmed){l.fire({title:`Saving Records.
Please wait.`,html:'<i class="fa fa-times-circle-o"></i>&nbsp;&nbsp;Close',showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,didOpen:()=>{l.showLoading()}});let r={id:a.state.selectedData.id,rooom_no:s,floor_no:i,building_no:o,description:d};axios.post("/classroom/update",r).then(async function(t){console.log(t),typeof t.status<"u"&&t.status=="201"?(typeof t.data<"u"&&typeof t.data<"u"?t.data:{}).status=="success"?l.fire({title:"Successfuly save!",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Continue",icon:"success",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(function(u){u.isConfirmed&&(l.close(),$("#updateClassroom").modal("hide"),a.getAllData())}):l.fire({title:"Fail to save",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!1,closeOnClickOutside:!1,dangerMode:!0}):typeof t.status<"u"&&t.status=="200"?(typeof t.data<"u"&&typeof t.data<"u"?t.data:{}).status=="data_exist"&&l.fire({title:"Data Exist",cancelButtonText:"Ok",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}):typeof t.status<"u"&&t.status=="422"}).catch(function(t){console.log(t),l.fire({title:"Server Error",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0})})}else n.isDismissed;return!1}):(subject_name==""&&($("#usubject_name-alert").removeAttr("class"),$("#usubject_name-alert").html("Required Field"),$("#usubject_name-alert").addClass("d-block invalid-feedback")),d==""&&($("#udescription-alert").removeAttr("class"),$("#udescription-alert").html("Required Field"),$("#udescription-alert").addClass("d-block invalid-feedback")))}delete(a){let s=this;l.fire({title:"Are you sure to remove this data?",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Yes",confirmButtonColor:"red",icon:"question",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(i=>{i.isConfirmed?(l.fire({title:`Removing Records.
Please wait.`,showCancelButton:!1,showConfirmButton:!1,allowOutsideClick:!1,didOpen:()=>{l.showLoading()}}),console.log(a),axios.delete("/classroom",{data:{id:a}}).then(function(o){console.log(o),typeof o.status<"u"&&o.status=="201"?(typeof o.data<"u"&&typeof o.data<"u"?o.data:{}).status=="success"?(s.getAllData(),l.fire({title:"Successfuly remove!",showCancelButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Ok",icon:"success",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(function(n){n.isConfirmed&&l.close()})):l.fire({title:"Fail to remove",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!1,closeOnClickOutside:!1,dangerMode:!0}):typeof o.status<"u"&&o.status=="200"&&(typeof o.data<"u"&&typeof o.data<"u"?o.data:{}).status=="data_not_exist"&&l.fire({title:"Data Not Exist",cancelButtonText:"Ok",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0})}).catch(function(o){console.log(o),l.fire({title:"Server Error",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0})})):l.close()})}render(){return e.jsxs(b,{title:"Classrooms",user:this.props.auth.user,children:[e.jsxs("div",{className:"noselect",children:[e.jsx("div",{className:"app-content-header",children:e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("h3",{className:"mb-0",children:[e.jsx("i",{className:"nav-icon bi bi-person-lines-fill"})," Classroom"]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("ol",{className:"breadcrumb float-sm-end",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(m,{href:"/admin/dashboard",children:"Dashboard"})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Classroom"})]})})]})})}),e.jsx("div",{className:"app-content",children:e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-lg-12",children:e.jsxs("div",{className:"card mb-4",children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("h3",{className:"card-title",children:[" ",e.jsx("i",{className:"bi bi-door-open"})," Classroom List"]}),e.jsxs("button",{className:"btn btn-primary float-right mr-1",onClick:()=>{$("#room").val(""),$("#floor").val(""),$("#building").val(""),$("#description").val(""),$("#newClassRoom").modal("show")},children:[" ",e.jsx("i",{className:"bi bi-person-plus-fill"})," Add"]})]}),e.jsx("div",{className:"card-body",children:e.jsx(h,{className:"table table-bordered table-striped ",data:this.state.data,columns:this.state.columns},"react-tables")})]})})})})})]}),e.jsx("div",{className:"modal fade",tabIndex:"-1",role:"dialog",id:"newClassRoom","aria-hidden":"true","data-bs-backdrop":"static",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title fs-5",children:"Create Classroom"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"room",className:"form-label",children:"Room"}),e.jsx("input",{type:"text",className:"form-control",id:"room",defaultValue:"",required:"",onChange:a=>{$("#subject-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({room:a.target.value})}}),e.jsx("div",{id:"room-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"floor",className:"form-label",children:"Floor"}),e.jsx("input",{type:"text",className:"form-control",id:"floor",defaultValue:"",required:"",onChange:a=>{$("#floor-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({floor_no:a.target.value})}}),e.jsx("div",{id:"floor-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"building",className:"form-label",children:"Building No."}),e.jsx("input",{type:"text",className:"form-control",id:"building",defaultValue:"",required:"",onChange:a=>{$("#building-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({building_no:a.target.value})}}),e.jsx("div",{id:"building-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"description",className:"form-label",children:"Description"}),e.jsx("textarea",{type:"text",className:"form-control",id:"description",defaultValue:"",required:"",onChange:a=>{$("#description-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({description:a.target.value})}}),e.jsx("div",{id:"description-alert",className:"invalid-feedback",children:"Please select a valid state."})]})]})})}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("button",{className:"btn btn-success float-right mr-1",onClick:()=>{this.saveData()},children:[" ",e.jsx("i",{className:"bi bi-save"})," Save"]}),e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})]})]})})}),e.jsx("div",{className:"modal fade",tabIndex:"-1",role:"dialog",id:"updateClassroom","aria-hidden":"true","data-bs-backdrop":"static",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title fs-5",children:"Create Classroom"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"uroom",className:"form-label",children:"Room"}),e.jsx("input",{type:"text",className:"form-control",id:"uroom",defaultValue:"",required:"",onChange:a=>{$("#uroom-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({room:a.target.value})}}),e.jsx("div",{id:"uroom-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"ufloor",className:"form-label",children:"Floor"}),e.jsx("input",{type:"text",className:"form-control",id:"ufloor",defaultValue:"",required:"",onChange:a=>{$("#ufloor-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({floor_no:a.target.value})}}),e.jsx("div",{id:"ufloor-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"ubuilding",className:"form-label",children:"Building No."}),e.jsx("input",{type:"text",className:"form-control",id:"ubuilding",defaultValue:"",required:"",onChange:a=>{$("#ubuilding-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({building_no:a.target.value})}}),e.jsx("div",{id:"ubuilding-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"udescription",className:"form-label",children:"Description"}),e.jsx("textarea",{type:"text",className:"form-control",id:"udescription",defaultValue:"",required:"",onChange:a=>{$("#udescription-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({description:a.target.value})}}),e.jsx("div",{id:"udescription-alert",className:"invalid-feedback",children:"Please select a valid state."})]})]})})}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("button",{className:"btn btn-success float-right mr-1",onClick:()=>{this.updateData()},children:[" ",e.jsx("i",{className:"bi bi-save"})," Update"]}),e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})]})]})})})]})}}export{O as default};
