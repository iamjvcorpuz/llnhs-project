import{r as d,j as e,U as n,a as c}from"./app-MQ-yEurC.js";import{S as a}from"./sweetalert2.esm.all-DPJM2oV6.js";import{Q as u}from"./index-B9Tcu3qw.js";import"./index-FTPeQx5Q.js";import{D as m}from"./DashboardLayout-Q83-rxtQ.js";import{C as h,m as f}from"./react-big-calendar.esm-Db_CZKWp.js";import{h as o}from"./moment-C5S46NFB.js";import"./Dropdown-DtFVle0_.js";import"./transition-CQN9Mefa.js";import"./index-DzSybp8L.js";import"./toConsumableArray-YXyhsiPu.js";import"./defineProperty-BMO0z4KE.js";import"./typeof-QjJsDpFa.js";import"./index-BbA8l3NR.js";const p=f(o);class A extends d.Component{constructor(i){super(i),this.state={data:[],columns:[{id:"no",accessor:"no",Header:"No.",width:100,className:"center"},{id:"qr",accessor:"lrn",Header:"QR Code",Cell:({row:t})=>e.jsx(u,{value:t.original.lrn,size:256,style:{height:"auto",maxWidth:"100%",width:"100%"},viewBox:"0 0 256 256",onDoubleClick:()=>{window.open(`/qrcode?code=${t.original.lrn}`)}})},{id:"picture",Header:"Picture",accessor:"photo",Cell:({row:t})=>e.jsx("img",{className:"",height:150,width:150,onError:s=>{s.target.src=t.original.sex=="Male"?"/adminlte/dist/assets/img/avatar.png":"/adminlte/dist/assets/img/avatar-f.jpeg"},alt:"Picture Error",src:t.original.photo!=null&&t.original.photo!=""?t.original.photo:t.original.sex=="Male"?"/adminlte/dist/assets/img/avatar.png":"/adminlte/dist/assets/img/avatar-f.jpeg"})},{id:"lrn",accessor:"lrn",Header:"LRN NO.",maxWidth:100},{id:"fullname",Header:"Fullname",width:800,accessor:"fullname"},{id:"level",Header:"Level",width:200,accessor:"level"},{id:"section",Header:"Section",width:200,accessor:"section"},{id:"Status",Header:"Status",width:200,accessor:"status",className:"center"},{id:"Action",Header:"Status",width:200,accessor:"status",className:"center",Cell:({row:t})=>e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"btn btn-danger btn-block btn-sm col-12 mb-1",onClick:()=>{this.deleteStudent(t.original.id)},children:[" ",e.jsx("i",{className:"bi bi-person-fill-x"})," Remove"]}),e.jsxs(n,{href:`/admin/dashboard/student/update/${t.original.id}`,className:"btn btn-primary btn-block btn-sm col-12 mb-1",children:[" ",e.jsx("i",{className:"bi bi-pen"})," Edit"]}),e.jsxs("button",{className:"btn btn-info btn-block btn-sm col-12 mb-1",onClick:()=>{},children:[" ",e.jsx("i",{className:"bi bi-printer"})," Print ID"]})]})}],eventsList:[],holidaysList:[{id:1,title:"Araw",start:"2025-04-19",end:"2025-04-19",color:"#ff4646",resource:"false",type:"holiday",allDay:"true"}],AttendanceList:[{id:3,title:"Present Subject 1",start:new Date(o("2025-04-19 08:00 AM").toString()),end:new Date(o("2025-04-19 09:00 AM").toString()),color:"#2bd34a",resource:"false",type:"Attendance",allDay:!1},{id:4,title:"Present Subject 2",start:new Date(o("2025-04-19 09:00 AM").toString()),end:new Date(o("2025-04-19 10:00 AM").toString()),color:"#2bd34a",resource:"false",type:"Attendance",allDay:!1},{id:5,title:"Present Subject 3",start:new Date(o("2025-04-19 10:00 AM").toString()),end:new Date(o("2025-04-19 11:00 AM").toString()),color:"#2bd34a",resource:"false",type:"Attendance",allDay:!1}]},this._isMounted=!1,this.loadStudentList=this.loadStudentList.bind(this),this.deleteStudent=this.deleteStudent.bind(this)}componentDidMount(){if(this._isMounted=!0,this.loadStudentList(),console.log(this.props),typeof this.props.holidays<"u"&&this.props.holidays!=null&&this.props.holidays.length>0){let i=[];this.props.holidays.forEach((t,s,l)=>{i.push({id:1,title:t.event_name,start:t.time_start,end:t.time_end,color:"#ff4646",resource:"false",type:t.type,allDay:!0}),s+1==l.length&&this.setState({holidaysList:i,eventsList:[...i,...this.state.AttendanceList]},()=>{console.log(this.state.eventsList)})})}}loadStudentList(){}deleteStudent(i){a.fire({title:"Are you sure to remove this data?",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Yes",confirmButtonColor:"red",icon:"question",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(t=>{t.isConfirmed?(a.fire({title:`Removing Records.
Please wait.`,showCancelButton:!1,showConfirmButton:!1,allowOutsideClick:!1,didOpen:()=>{a.showLoading()}}),c.delete("/student",{data:{id:i}}).then(function(s){if(typeof s.status<"u"&&s.status=="201"){let l=typeof s.data<"u"&&typeof s.data<"u"?s.data:{};(l.status="sucess")?a.fire({title:"Successfuly remove!",showCancelButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Ok",icon:"success",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(function(r){r.isConfirmed&&a.close()}):a.fire({title:"Fail to remove",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!1,closeOnClickOutside:!1,dangerMode:!0})}else if(typeof s.status<"u"&&s.status=="200"){let l=typeof s.data<"u"&&typeof s.data<"u"?s.data:{};(l.status="data_not_exist")&&a.fire({title:"Data Not Exist",cancelButtonText:"Ok",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0})}}).catch(function(s){console.log(s),a.fire({title:"Server Error",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0})})):a.close()})}render(){return e.jsxs(m,{title:"Attendance",user:this.props.auth.user,profile:this.props.auth.profile,children:[e.jsx("div",{className:"app-content-header",children:e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("h3",{className:"mb-0",children:[e.jsx("i",{className:"nav-icon bi bi-person-lines-fill"})," Attendance"]})}),e.jsx("div",{className:"col-sm-6",children:e.jsx("ol",{className:"breadcrumb float-sm-end",children:e.jsxs("li",{className:"breadcrumb-item",children:[e.jsx("i",{className:"bi bi-speedometer mr-2"}),e.jsx(n,{href:"/parents/dashboard",children:"Dashboard"})]})})})]})})}),e.jsx("div",{className:"app-content",children:e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-lg-12",children:e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-header",children:e.jsx("div",{className:"row d-flex",children:e.jsx("div",{className:"col-lg-2 me-auto",children:e.jsxs("h3",{className:"card-title mt-2 ",children:[" ",e.jsx("i",{className:"bi bi-person"})," Attendance"]})})})}),e.jsx("div",{className:"card-body",children:e.jsx(h,{events:this.state.eventsList,localizer:p,startAccessor:"start",endAccessor:"end",style:{height:500}})})]})})})})})]})}}export{A as default};
