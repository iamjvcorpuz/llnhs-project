import{r as h,a as c,j as e,U as d}from"./app-MQ-yEurC.js";import{E as r}from"./EachMethod-DlQbtg5B.js";import{S as s}from"./sweetalert2.esm.all-DPJM2oV6.js";import{h as u}from"./moment-C5S46NFB.js";import"./index-FTPeQx5Q.js";import{D as f}from"./DashboardLayout-Q83-rxtQ.js";import"./index-B9Tcu3qw.js";import"./react-webcam-C_JsNYoc.js";import"./Dropdown-DtFVle0_.js";import"./transition-CQN9Mefa.js";import"./index-DzSybp8L.js";class B extends h.Component{constructor(a){super(a),this.state={photoupload:"",photobase64:"",photobase64final:"",lrn:"",psa_cert_no:"",qrcode:"",first_name:"",last_name:"",middle_name:"",extension_name:"",sex:"",bdate:"",status:"",email:"",contact_list:[],filedata:null,filedataName:"",filetype:"",filetype_:"",cameraOn:!1,bdate_max:u(new Date).subtract("years",15).format("YYYY-MM-DD"),subjects:this.props.subjects,teachers:this.props.teacher,advisoryList:this.props.advisory,sectionList:this.props.section,selectedTeacher:"",selectedSubject:"",selectedYearLevel:"",selectedSection:"",selectedSY:""},this._isMounted=!1}componentDidMount(){this._isMounted=!0,console.log(this.props)}getTeacherData(){}getSubjectsData(){}getAdvisoryData(){}saveData(){let a=this;if(a.state.first_name!=""&&a.state.middle_name!=""&&a.state.last_name!=""&&a.state.sex!=""&&a.state.bdate!=""&&a.state.lrn!=""){if($("#invalidCheck").prop("checked")==!1){$("#invalidCheck-alert").removeAttr("class"),$("#invalidCheck-alert").addClass("d-block invalid-feedback"),alert("Please check aggree to all fields are correct");return}s.fire({title:"If all fields are correct and please click to continue to save",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"warning",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(l=>{if(l.isConfirmed){s.fire({title:`Submitting Records.
Please wait.`,html:'<i class="fa fa-times-circle-o"></i>&nbsp;&nbsp;Close',showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,didOpen:()=>{s.showLoading()}});let o={qr_code:a.state.lrn,first_name:a.state.first_name,last_name:a.state.last_name,middle_name:a.state.middle_name,extension_name:a.state.extension_name,bdate:a.state.bdate,status:"active",picture_base64:a.state.photobase64final,email:a.state.email,sex:a.state.sex};c.post("/parents",o).then(async function(t){typeof t.status<"u"&&t.status=="201"?(typeof t.data<"u"&&typeof t.data<"u"?t.data:{}).status=="success"?(a.state.contact_list.forEach(async i=>{console.log({type:null,student_id:null,teacher_id:t.data.data.id,guardian_id:null,phone_number:i.phone_number,telephone_number:i.phone_number}),c.post("/contacts",{type:null,student_id:null,teacher_id:t.data.data.id,guardian_id:null,phone_number:i.phone_number,telephone_number:i.phone_number}).then(function(n){typeof n.status<"u"&&n.status=="201"})}),s.fire({title:"Successfuly save!",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"success",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(function(i){i.isConfirmed&&(s.close(),document.getElementById("cancel").click())})):s.fire({title:"Fail to save",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!1,closeOnClickOutside:!1,dangerMode:!0}):typeof t.status<"u"&&t.status=="200"?(typeof t.data<"u"&&typeof t.data<"u"?t.data:{}).status=="data_exist"&&s.fire({title:"Data Exist",cancelButtonText:"Ok",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}):typeof t.status<"u"&&t.status=="422"}).catch(function(t){console.log(t),s.fire({title:"Server Error",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0})})}else l.isDismissed;return!1})}else a.state.first_name==""&&($("#first-name-alert").removeAttr("class"),$("#first-name-alert").html("Required Field"),$("#first-name-alert").addClass("d-block invalid-feedback")),a.state.middle_name==""&&($("#middle-name-alert").removeAttr("class"),$("#middle-name-alert").html("Required Field"),$("#middle-name-alert").addClass("d-block invalid-feedback")),a.state.last_name==""&&($("#last-name-alert").removeAttr("class"),$("#last-name-alert").html("Required Field"),$("#last-name-alert").addClass("d-block invalid-feedback")),a.state.sex==""&&($("#sex-alert").removeAttr("class"),$("#sex-alert").html("Required Field"),$("#sex-alert").addClass("d-block invalid-feedback")),a.state.bdate==""&&($("#bdate-alert").removeAttr("class"),$("#bdate-alert").html("Required Field"),$("#bdate-alert").addClass("d-block invalid-feedback")),a.state.lrn==""&&($("#lrn-alert").removeAttr("class"),$("#lrn-alert").html("Required Field"),$("#lrn-alert").addClass("d-block invalid-feedback"))}render(){return e.jsx(f,{title:"New Teacher",user:this.props.auth.user,children:e.jsxs("div",{className:"noselect",children:[e.jsx("div",{className:"app-content-header",children:e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("h3",{className:"mb-0",children:[e.jsx("i",{className:"nav-icon bi bi-book-half"})," Teacher's Advisory"]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("ol",{className:"breadcrumb float-sm-end",children:[e.jsxs("li",{className:"breadcrumb-item",children:[e.jsx("i",{className:"bi bi-speedometer mr-2"}),e.jsx(d,{href:"/admin/dashboard",children:"Dashboard"})]}),e.jsx("li",{className:"breadcrumb-item",children:e.jsx(d,{href:"/admin/dashboard/advisory",children:"Advisory"})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"New"})]})})]})})}),e.jsx("div",{className:"app-content",children:e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-lg-12",children:e.jsxs("div",{className:"card mb-4",children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("h3",{className:"card-title mt-2",children:[" ",e.jsx("i",{className:"bi bi-person"})," New Advisory"]}),e.jsxs(d,{href:"/admin/dashboard/advisory",id:"cancel",className:"btn btn-danger float-right",children:[" ",e.jsx("i",{className:"bi bi-person-fill-x"})," Cancel"]}),e.jsxs("button",{className:"btn btn-success float-right mr-1",onClick:()=>{this.saveData()},children:[" ",e.jsx("i",{className:"bi bi-person-plus-fill"})," Save"]})]}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{htmlFor:"extension_name",className:"form-label",children:"Teacher"}),e.jsx("input",{type:"text",className:"form-control",list:"selectedTeacher",id:"teacher",defaultValue:"",required:"",onChange:a=>{$("#teacher-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({selectedTeacher:a.target.value})}}),e.jsx("div",{id:"teacher-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{htmlFor:"extension_name",className:"form-label",children:"Year Level"}),e.jsx("input",{type:"text",className:"form-control",list:"selectedYearLevel",id:"teacher",defaultValue:"",required:"",onChange:a=>{$("#teacher-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({selectedYearLevel:a.target.value})}}),e.jsx("div",{id:"extension-name-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{htmlFor:"extension_name",className:"form-label",children:"Section"}),e.jsx("input",{type:"text",className:"form-control",list:"selectedSection",id:"teacher",defaultValue:"",required:"",onChange:a=>{$("#teacher-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({selectedSection:a.target.value})}}),e.jsx("div",{id:"extension-name-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{htmlFor:"extension_name",className:"form-label",children:"School Year"}),e.jsx("input",{type:"text",className:"form-control",list:"selectedSY",id:"teacher",defaultValue:"",required:"",onChange:a=>{$("#teacher-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({selectedSY:a.target.value})}}),e.jsx("div",{id:"extension-name-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{htmlFor:"extension_name",className:"form-label",children:"Subject"}),e.jsxs("select",{className:"form-select",id:"extension_name",required:"",onChange:a=>{$("#extension-name-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({selectedSubject:a.target.value})},children:[e.jsx("option",{disabled:!0,children:"Choose..."}),e.jsx("option",{}),e.jsx(r,{of:this.state.subjects,render:(a,l)=>e.jsx("option",{value:a.id,children:a.subject_name})})]}),e.jsx("div",{id:"extension-name-alert",className:"invalid-feedback",children:"Please select a valid state."})]})]})})]})})})})}),e.jsx("datalist",{id:"selectedTeacher",children:e.jsx(r,{of:this.state.teachers,render:(a,l)=>e.jsx("option",{children:`${a.last_name}, ${a.first_name}`})})}),e.jsxs("datalist",{id:"selectedYearLevel",children:[e.jsx("option",{children:"Grade 7"}),e.jsx("option",{children:"Grade 8"}),e.jsx("option",{children:"Grade 9"}),e.jsx("option",{children:"Grade 10"}),e.jsx("option",{children:"Grade 11"}),e.jsx("option",{children:"Grade 12"})]}),e.jsx("datalist",{id:"selectedSection",children:e.jsx(r,{of:this.state.sectionList,render:(a,l)=>e.jsx("option",{children:`${a.last_name}, ${a.first_name}`})})}),e.jsx("datalist",{id:"selectedSY",children:e.jsx("option",{children:"2025 - 2026"})}),e.jsx("datalist",{id:"selectedSubject",children:e.jsx(r,{of:this.state.teachers,render:(a,l)=>e.jsx("option",{children:`${a.last_name}, ${a.first_name}`})})})]})})}}export{B as default};
