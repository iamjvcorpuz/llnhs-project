import{r as h,j as e,U as v}from"./app-MQ-yEurC.js";import{S as l}from"./sweetalert2.esm.all-DPJM2oV6.js";import{R as b}from"./ReactTable-CiiRreiS.js";import{D as x}from"./DashboardLayout-Q83-rxtQ.js";import"./index-FTPeQx5Q.js";import"./Dropdown-DtFVle0_.js";import"./transition-CQN9Mefa.js";import"./index-DzSybp8L.js";class _ extends h.Component{constructor(a){super(a),this.state={data:this.props.holidays,data_users:[],columns:[{id:"no",accessor:"index",Header:"No.",width:50,className:"center"},{id:"type",Header:"Holiday Type",accessor:"type",className:"center",width:126},{id:"event",Header:"Event",width:126,accessor:"event_name"},{id:"date",Header:"Date",width:100,accessor:"date",className:"center"},{id:"description",Header:"Description",width:300,accessor:"description",className:"center"},{id:"action",Header:"Action",width:100,accessor:"index",className:"center",Cell:({row:i})=>e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"btn btn-danger btn-block btn-sm col-12 mb-1",onClick:()=>{this.delete(i.original.id)},children:[" ",e.jsx("i",{className:"bi bi-person-fill-x"})," Remove"]}),e.jsxs("button",{onClick:()=>{$("#uholidayType").val(""),$("#uevent_name").val(""),$("#udate").val(""),$("#utime_start").val(""),$("#utime_end").val(""),$("#udescription").val(""),this.selectSubject(i.original)},className:"btn btn-primary btn-block btn-sm col-12 mb-1",children:[" ",e.jsx("i",{className:"bi bi-pen"})," Edit"]})]})}],id:"",room_no:"",floor_no:"",building_no:"",description:"",selectedData:{}},console.log(this.props),this.delete=this.delete.bind(this),this.selectSubject=this.selectSubject.bind(this),this.getAllData=this.getAllData.bind(this)}componentDidMount(){this.getAllData()}selectSubject(a){$("#uholidayType").val(a.type),$("#uevent_name").val(a.event_name),$("#udate").val(a.date),$("#utime_start").val(a.time_start),$("#utime_end").val(a.time_end),$("#udescription").val(a.description),this.setState({selectedData:a},()=>{$("#updateHoliday").modal("show")})}getAllData(){let a=this;axios.get("/holidays").then(function(i){if(console.log(i),typeof i.status<"u"&&i.status=="200"){let d=typeof i.data<"u"&&typeof i.data<"u"?i.data:{};Object.keys(d).length>0?a.setState({data:d}):a.setState({data:[]})}})}saveData(){let a=this,i=$("#holidayType").val(),d=$("#event_name").val(),s=$("#date").val(),o=$("#time_start").val(),n=$("#time_end").val(),u=$("#description").val();i!=""&&d!=""&&s!=""?l.fire({title:"If all fields are correct and please click to continue to save",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Continue",icon:"warning",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(r=>{if(r.isConfirmed){l.fire({title:`Saving Records.
Please wait.`,html:'<i class="fa fa-times-circle-o"></i>&nbsp;&nbsp;Close',showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,didOpen:()=>{l.showLoading()}});let c={holidayType:i,event_name:d,date:s,time_start:o,time_end:n,description:u};axios.post("/holidays",c).then(async function(t){typeof t.status<"u"&&t.status=="201"?(typeof t.data<"u"&&typeof t.data<"u"?t.data:{}).status=="success"?l.fire({title:"Successfuly save!",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Continue",icon:"success",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(function(f){f.isConfirmed&&(l.close(),$("#newHoliday").modal("hide"),a.getAllData())}):l.fire({title:"Fail to save",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!1,closeOnClickOutside:!1,dangerMode:!0}):typeof t.status<"u"&&t.status=="200"?(typeof t.data<"u"&&typeof t.data<"u"?t.data:{}).status=="data_exist"&&l.fire({title:"Data Exist",cancelButtonText:"Ok",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}):typeof t.status<"u"&&t.status=="422"}).catch(function(t){console.log(t),l.fire({title:"Server Error",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0})})}else r.isDismissed;return!1}):(i==""&&($("#subject_name-alert").removeAttr("class"),$("#subject_name-alert").html("Required Field"),$("#subject_name-alert").addClass("d-block invalid-feedback")),d==""&&($("#event_name-alert").removeAttr("class"),$("#event_name-alert").html("Required Field"),$("#event_name-alert").addClass("d-block invalid-feedback")),s==""&&($("#date-alert").removeAttr("class"),$("#date-alert").html("Required Field"),$("#date-alert").addClass("d-block invalid-feedback")))}updateData(){let a=this,i=$("#uholidayType").val(),d=$("#uevent_name").val(),s=$("#udate").val(),o=$("#utime_start").val(),n=$("#utime_end").val(),u=$("#udescription").val();i!=""&&d!=""&&s!=""?l.fire({title:"If all fields are correct and please click to continue to save",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Continue",icon:"warning",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(r=>{if(r.isConfirmed){l.fire({title:`Saving Records.
Please wait.`,html:'<i class="fa fa-times-circle-o"></i>&nbsp;&nbsp;Close',showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,didOpen:()=>{l.showLoading()}});let c={id:a.state.selectedData.id,holidayType:i,event_name:d,date:s,time_start:o,time_end:n,description:u};console.log(c),axios.post("/holidays/update",c).then(async function(t){console.log(t),typeof t.status<"u"&&t.status=="201"?(typeof t.data<"u"&&typeof t.data<"u"?t.data:{}).status=="success"?l.fire({title:"Successfuly save!",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Continue",icon:"success",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(function(f){f.isConfirmed&&(l.close(),$("#updateHoliday").modal("hide"),a.getAllData())}):l.fire({title:"Fail to save",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!1,closeOnClickOutside:!1,dangerMode:!0}):typeof t.status<"u"&&t.status=="200"?(typeof t.data<"u"&&typeof t.data<"u"?t.data:{}).status=="data_exist"&&l.fire({title:"Data Exist",cancelButtonText:"Ok",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}):typeof t.status<"u"&&t.status=="422"}).catch(function(t){console.log(t),l.fire({title:"Server Error",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0})})}else r.isDismissed;return!1}):(i==""&&($("#usubject_name-alert").removeAttr("class"),$("#usubject_name-alert").html("Required Field"),$("#usubject_name-alert").addClass("d-block invalid-feedback")),d==""&&($("#uevent_name-alert").removeAttr("class"),$("#uevent_name-alert").html("Required Field"),$("#uevent_name-alert").addClass("d-block invalid-feedback")),s==""&&($("#udate-alert").removeAttr("class"),$("#udate-alert").html("Required Field"),$("#udate-alert").addClass("d-block invalid-feedback")))}delete(a){let i=this;l.fire({title:"Are you sure to remove this data?",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Yes",confirmButtonColor:"red",icon:"question",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(d=>{d.isConfirmed?(l.fire({title:`Removing Records.
Please wait.`,showCancelButton:!1,showConfirmButton:!1,allowOutsideClick:!1,didOpen:()=>{l.showLoading()}}),console.log(a),axios.delete("/holidays",{data:{id:a}}).then(function(s){if(console.log(s),typeof s.status<"u"&&s.status=="201"){let o=typeof s.data<"u"&&typeof s.data<"u"?s.data:{};(o.status="sucess")?(i.getAllData(),l.fire({title:"Successfuly remove!",showCancelButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Ok",icon:"success",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(function(n){n.isConfirmed&&l.close()})):l.fire({title:"Fail to remove",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!1,closeOnClickOutside:!1,dangerMode:!0})}else typeof s.status<"u"&&s.status=="200"&&(typeof s.data<"u"&&typeof s.data<"u"?s.data:{}).status=="data_not_exist"&&l.fire({title:"Data Not Exist",cancelButtonText:"Ok",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0})}).catch(function(s){console.log(s),l.fire({title:"Server Error",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0})})):l.close()})}render(){return e.jsxs(x,{title:"Holidays",user:this.props.auth.user,children:[e.jsxs("div",{className:"noselect",children:[e.jsx("div",{className:"app-content-header",children:e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("h3",{className:"mb-0",children:[e.jsx("i",{className:"nav-icon bi bi-calendar3"})," Holidays"]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("ol",{className:"breadcrumb float-sm-end",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(v,{href:"/admin/dashboard",children:"Dashboard"})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Holidays"})]})})]})})}),e.jsx("div",{className:"app-content",children:e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-lg-12",children:e.jsxs("div",{className:"card mb-4",children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("h3",{className:"card-title",children:[" ",e.jsx("i",{className:"bi bi-calendar3"})," Holidays List"]}),e.jsxs("button",{className:"btn btn-primary float-right mr-1",onClick:()=>{$("#holidayType").val(""),$("#event_name").val(""),$("#date").val(""),$("#time_start").val(""),$("#time_end").val(""),$("#description").val(""),$("#newHoliday").modal("show")},children:[" ",e.jsx("i",{className:"bi bi-calendar"})," Add"]})]}),e.jsx("div",{className:"card-body",children:e.jsx(b,{className:"table table-bordered table-striped ",data:this.state.data,columns:this.state.columns},"react-tables")})]})})})})})]}),e.jsx("div",{className:"modal fade",tabIndex:"-1",role:"dialog",id:"newHoliday","aria-hidden":"true","data-bs-backdrop":"static",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title fs-5",children:"Create Holidays"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"grade",className:"form-label",children:"Holiday Type"}),e.jsxs("select",{name:"holidayType",id:"holidayType",className:"form-control",onChange:a=>{$("#holidayType-alert").removeAttr("class").addClass("invalid-feedback"),a.target.value!=""&&this.setState({selectedGrade:a.target.value})},children:[e.jsx("option",{disabled:!0,children:"--Select Type--"}),e.jsx("option",{value:""}),e.jsx("option",{value:"Regular",children:"Regular"}),e.jsx("option",{value:"Special Non-Working",children:"Special Non-Working"}),e.jsx("option",{value:"Special Working Holiday",children:"Special Working Holiday"}),e.jsx("option",{value:"Other Considerations"})]}),e.jsx("div",{id:"holidayType-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"event_name",className:"form-label",children:"Event Name"}),e.jsx("input",{type:"text",className:"form-control",id:"event_name",defaultValue:"",required:"",onChange:a=>{$("#event_name-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({room:a.target.value})}}),e.jsx("div",{id:"event_name-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"date",className:"form-label",children:"Date"}),e.jsx("input",{type:"date",className:"form-control",id:"date",defaultValue:"08:00",min:"08:00",required:"",onChange:a=>{console.log(a.target.value),this.setState({time_start:a.target.value}),$("#date-alert").removeAttr("class").addClass("invalid-feedback")}}),e.jsx("div",{id:"date-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:"time_start",className:"form-label",children:"Time Start"}),e.jsx("input",{type:"time",className:"form-control",id:"time_start",defaultValue:"08:00",min:"08:00",required:"",onChange:a=>{console.log(a.target.value),this.setState({time_start:a.target.value}),$("#time_start-alert").removeAttr("class").addClass("invalid-feedback")}}),e.jsx("div",{id:"time_start-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:"time_end",className:"form-label",children:"Time End"}),e.jsx("input",{type:"time",className:"form-control",id:"time_end",min:this.state.time_start,defaultValue:"08:00",required:"",onChange:a=>{$("#time_end-alert").removeAttr("class").addClass("invalid-feedback")}}),e.jsx("div",{id:"time_end-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"description",className:"form-label",children:"Description"}),e.jsx("textarea",{type:"text",className:"form-control",id:"description",defaultValue:"",required:"",onChange:a=>{$("#description-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({description:a.target.value})}}),e.jsx("div",{id:"description-alert",className:"invalid-feedback",children:"Please select a valid state."})]})]})})}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("button",{className:"btn btn-success float-right mr-1",onClick:()=>{this.saveData()},children:[" ",e.jsx("i",{className:"bi bi-save"})," Save"]}),e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})]})]})})}),e.jsx("div",{className:"modal fade",tabIndex:"-1",role:"dialog",id:"updateHoliday","aria-hidden":"true","data-bs-backdrop":"static",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title fs-5",children:"Update Holidays"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"grade",className:"form-label",children:"Holiday Type"}),e.jsxs("select",{name:"uholidayType",id:"uholidayType",className:"form-control",onChange:a=>{$("#uholidayType-alert").removeAttr("class").addClass("invalid-feedback"),a.target.value!=""&&this.setState({selectedGrade:a.target.value})},children:[e.jsx("option",{disabled:!0,children:"--Select Type--"}),e.jsx("option",{value:""}),e.jsx("option",{value:"Regular",children:"Regular"}),e.jsx("option",{value:"Special Non-Working",children:"Special Non-Working"}),e.jsx("option",{value:"Special Working Holiday",children:"Special Working Holiday"}),e.jsx("option",{value:"Other Considerations"})]}),e.jsx("div",{id:"uholidayType-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"uevent_name",className:"form-label",children:"Event Name"}),e.jsx("input",{type:"text",className:"form-control",id:"uevent_name",defaultValue:"",required:"",onChange:a=>{$("#uevent_name-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({room:a.target.value})}}),e.jsx("div",{id:"uevent_name-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"udate",className:"form-label",children:"Date"}),e.jsx("input",{type:"date",className:"form-control",id:"udate",defaultValue:"08:00",min:"08:00",required:"",onChange:a=>{console.log(a.target.value),this.setState({time_start:a.target.value}),$("#udate-alert").removeAttr("class").addClass("invalid-feedback")}}),e.jsx("div",{id:"udate-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:"utime_start",className:"form-label",children:"Time Start"}),e.jsx("input",{type:"time",className:"form-control",id:"utime_start",defaultValue:"08:00",min:"08:00",required:"",onChange:a=>{console.log(a.target.value),this.setState({time_start:a.target.value}),$("#utime_start-alert").removeAttr("class").addClass("invalid-feedback")}}),e.jsx("div",{id:"utime_start-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:"utime_end",className:"form-label",children:"Time End"}),e.jsx("input",{type:"time",className:"form-control",id:"utime_end",min:this.state.time_start,defaultValue:"08:00",required:"",onChange:a=>{$("#utime_end-alert").removeAttr("class").addClass("invalid-feedback")}}),e.jsx("div",{id:"utime_end-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"udescription",className:"form-label",children:"Description"}),e.jsx("textarea",{type:"text",className:"form-control",id:"udescription",defaultValue:"",required:"",onChange:a=>{$("#udescription-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({description:a.target.value})}}),e.jsx("div",{id:"udescription-alert",className:"invalid-feedback",children:"Please select a valid state."})]})]})})}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("button",{className:"btn btn-success float-right mr-1",onClick:()=>{this.updateData()},children:[" ",e.jsx("i",{className:"bi bi-save"})," Update"]}),e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})]})]})})})]})}}export{_ as default};
