import{r as b,j as e,a as u,U as x}from"./app-MQ-yEurC.js";import{S as l}from"./sweetalert2.esm.all-DPJM2oV6.js";import{h as C}from"./moment-C5S46NFB.js";import"./index-B9Tcu3qw.js";import"./react-webcam-C_JsNYoc.js";import"./apexcharts.esm-CWma0ncG.js";import{R as p}from"./ReactTable-CiiRreiS.js";import{D as j}from"./DashboardLayout-Q83-rxtQ.js";import"./index-FTPeQx5Q.js";import"./Dropdown-DtFVle0_.js";import"./transition-CQN9Mefa.js";import"./index-DzSybp8L.js";class F extends b.Component{constructor(a){super(a),this.state={data:this.props.events,data_users:[],columns:[{id:"no",accessor:"index",Header:"No.",width:50,className:"center"},{id:"type",Header:"Event Type",accessor:"type",className:"center",width:126},{id:"event",Header:"Event",width:126,accessor:"event_name"},{id:"date",Header:"Date",width:100,accessor:"date",className:"center"},{id:"time",Header:"Time",width:100,accessor:"time_start",className:"center",Cell:({row:s})=>e.jsxs(e.Fragment,{children:[s.original.time_start," - ",s.original.time_end]})},{id:"description",Header:"Description",width:300,accessor:"description",className:"center"},{id:"action",Header:"Action",width:100,accessor:"index",className:"center",Cell:({row:s})=>e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"btn btn-danger btn-block btn-sm col-12 mb-1",onClick:()=>{this.delete(s.original.id)},children:[" ",e.jsx("i",{className:"bi bi-person-fill-x"})," Remove"]}),e.jsxs("button",{onClick:()=>{$("#uholidayType").val(""),$("#uevent_name").val(""),$("#udate").val(""),$("#utime_start").val(""),$("#utime_end").val(""),$("#udescription").val(""),this.selectSubject(s.original)},className:"btn btn-primary btn-block btn-sm col-12 mb-1",children:[" ",e.jsx("i",{className:"bi bi-pen"})," Edit"]})]})}],id:"",room_no:"",floor_no:"",building_no:"",description:"",selectedData:{},todayDate:C(new Date).format("YYYY-MM-DD")},console.log(this.props.events),this.delete=this.delete.bind(this),this.selectSubject=this.selectSubject.bind(this),this.getAllData=this.getAllData.bind(this)}componentDidMount(){}selectSubject(a){$("#uholidayType").val(a.type),$("#uevent_name").val(a.event_name),$("#udate").val(a.date),$("#utime_start").val(a.time_start),$("#utime_end").val(a.time_end),$("#udescription").val(a.description),$("#ufacilitator").val(a.facilitator),this.setState({selectedData:a},()=>{$("#updateHoliday").modal("show")})}getAllData(){let a=this;u.get("/events").then(function(s){if(console.log(s),typeof s.status<"u"&&s.status=="200"){let d=typeof s.data<"u"&&typeof s.data<"u"?s.data:{};Object.keys(d).length>0?a.setState({data:d}):a.setState({data:[]})}})}saveData(){let a=this,s=$("#holidayType").val(),d=$("#event_name").val(),i=$("#date").val(),o=$("#time_start").val(),n=$("#time_end").val(),f=$("#description").val(),h=$("#facilitator").val();s!=""&&d!=""&&i!=""?l.fire({title:"If all fields are correct and please click to continue to save",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Continue",icon:"warning",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(r=>{if(r.isConfirmed){l.fire({title:`Saving Records.
Please wait.`,html:'<i class="fa fa-times-circle-o"></i>&nbsp;&nbsp;Close',showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,didOpen:()=>{l.showLoading()}});let m={facilitator:h,holidayType:s,event_name:d,date:i,time_start:o,time_end:n,description:f};u.post("/events",m).then(async function(t){if(typeof t.status<"u"&&t.status=="201")(typeof t.data<"u"&&typeof t.data<"u"?t.data:{}).status=="success"?l.fire({title:"Successfuly save!",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Continue",icon:"success",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(function(v){v.isConfirmed&&(l.close(),$("#newHoliday").modal("hide"),a.getAllData())}):l.fire({title:"Fail to save",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!1,closeOnClickOutside:!1,dangerMode:!0});else if(typeof t.status<"u"&&t.status=="200"){let c=typeof t.data<"u"&&typeof t.data<"u"?t.data:{};(c.status="data_exist")&&l.fire({title:"Data Exist",cancelButtonText:"Ok",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0})}else typeof t.status<"u"&&t.status=="422"}).catch(function(t){console.log(t),l.fire({title:"Server Error",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0})})}else r.isDismissed;return!1}):(s==""&&($("#subject_name-alert").removeAttr("class"),$("#subject_name-alert").html("Required Field"),$("#subject_name-alert").addClass("d-block invalid-feedback")),d==""&&($("#event_name-alert").removeAttr("class"),$("#event_name-alert").html("Required Field"),$("#event_name-alert").addClass("d-block invalid-feedback")),i==""&&($("#date-alert").removeAttr("class"),$("#date-alert").html("Required Field"),$("#date-alert").addClass("d-block invalid-feedback")))}updateData(){let a=this,s=$("#uholidayType").val(),d=$("#uevent_name").val(),i=$("#udate").val(),o=$("#utime_start").val(),n=$("#utime_end").val(),f=$("#udescription").val(),h=$("#ufacilitator").val();s!=""&&d!=""&&i!=""?l.fire({title:"If all fields are correct and please click to continue to save",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Continue",icon:"warning",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(r=>{if(r.isConfirmed){l.fire({title:`Saving Records.
Please wait.`,html:'<i class="fa fa-times-circle-o"></i>&nbsp;&nbsp;Close',showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,didOpen:()=>{l.showLoading()}});let m={id:a.state.selectedData.id,facilitator:h,holidayType:s,event_name:d,date:i,time_start:o,time_end:n,description:f};console.log(m),u.post("/events/update",m).then(async function(t){if(console.log(t),typeof t.status<"u"&&t.status=="201")(typeof t.data<"u"&&typeof t.data<"u"?t.data:{}).status=="success"?l.fire({title:"Successfuly save!",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Continue",icon:"success",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(function(v){v.isConfirmed&&(l.close(),$("#updateHoliday").modal("hide"),a.getAllData())}):l.fire({title:"Fail to save",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!1,closeOnClickOutside:!1,dangerMode:!0});else if(typeof t.status<"u"&&t.status=="200"){let c=typeof t.data<"u"&&typeof t.data<"u"?t.data:{};(c.status="data_exist")&&l.fire({title:"Data Exist",cancelButtonText:"Ok",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0})}else typeof t.status<"u"&&t.status=="422"}).catch(function(t){console.log(t),l.fire({title:"Server Error",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0})})}else r.isDismissed;return!1}):(s==""&&($("#usubject_name-alert").removeAttr("class"),$("#usubject_name-alert").html("Required Field"),$("#usubject_name-alert").addClass("d-block invalid-feedback")),d==""&&($("#uevent_name-alert").removeAttr("class"),$("#uevent_name-alert").html("Required Field"),$("#uevent_name-alert").addClass("d-block invalid-feedback")),i==""&&($("#udate-alert").removeAttr("class"),$("#udate-alert").html("Required Field"),$("#udate-alert").addClass("d-block invalid-feedback")))}delete(a){let s=this;l.fire({title:"Are you sure to remove this data?",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Yes",confirmButtonColor:"red",icon:"question",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(d=>{d.isConfirmed?(l.fire({title:`Removing Records.
Please wait.`,showCancelButton:!1,showConfirmButton:!1,allowOutsideClick:!1,didOpen:()=>{l.showLoading()}}),console.log(a),u.delete("/events",{data:{id:a}}).then(function(i){if(console.log(i),typeof i.status<"u"&&i.status=="201")(typeof i.data<"u"&&typeof i.data<"u"?i.data:{}).status=="success"?(s.getAllData(),l.fire({title:"Successfuly remove!",showCancelButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Ok",icon:"success",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(function(n){n.isConfirmed&&l.close()})):l.fire({title:"Fail to remove",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!1,closeOnClickOutside:!1,dangerMode:!0});else if(typeof i.status<"u"&&i.status=="200"){let o=typeof i.data<"u"&&typeof i.data<"u"?i.data:{};(o.status="data_not_exist")&&l.fire({title:"Data Not Exist",cancelButtonText:"Ok",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0})}}).catch(function(i){console.log(i),l.fire({title:"Server Error",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0})})):l.close()})}render(){return e.jsxs(j,{title:"Holidays",user:this.props.auth.user,children:[e.jsxs("div",{className:"noselect",children:[e.jsx("div",{className:"app-content-header",children:e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("h3",{className:"mb-0",children:[e.jsx("i",{className:"nav-icon bi bi-calendar3"})," Event"]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("ol",{className:"breadcrumb float-sm-end",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(x,{href:"/admin/dashboard",children:"Dashboard"})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Event"})]})})]})})}),e.jsx("div",{className:"app-content",children:e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-lg-12",children:e.jsxs("div",{className:"card mb-4",children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("h3",{className:"card-title",children:[" ",e.jsx("i",{className:"bi bi-calendar3"})," Event List"]}),e.jsxs("button",{className:"btn btn-primary float-right mr-1",onClick:()=>{$("#holidayType").val(""),$("#event_name").val(""),$("#date").val(""),$("#time_start").val(""),$("#time_end").val(""),$("#description").val(""),$("#newHoliday").modal("show")},children:[" ",e.jsx("i",{className:"bi bi-calendar"})," Add"]})]}),e.jsx("div",{className:"card-body",children:e.jsx(p,{className:"table table-bordered table-striped ",data:this.state.data,columns:this.state.columns},"react-tables")})]})})})})})]}),e.jsx("div",{className:"modal fade",tabIndex:"-1",role:"dialog",id:"newHoliday","aria-hidden":"true","data-bs-backdrop":"static",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title fs-5",children:"Create Event"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"grade",className:"form-label",children:"Event Type"}),e.jsxs("select",{name:"holidayType",id:"holidayType",className:"form-control",onChange:a=>{$("#holidayType-alert").removeAttr("class").addClass("invalid-feedback"),a.target.value!=""&&this.setState({selectedGrade:a.target.value})},children:[e.jsx("option",{disabled:!0,children:"--Select Type--"}),e.jsx("option",{value:""}),e.jsx("option",{value:"Regular",children:"Regular"}),e.jsx("option",{value:"Special",children:"Special"}),e.jsx("option",{value:"Other",children:"Other"})]}),e.jsx("div",{id:"holidayType-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"event_name",className:"form-label",children:"Event Name"}),e.jsx("input",{type:"text",className:"form-control",id:"event_name",defaultValue:"",required:"",onChange:a=>{$("#event_name-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({event_name:a.target.value})}}),e.jsx("div",{id:"event_name-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"facilitator",className:"form-label",children:"Facilitator "}),e.jsx("input",{type:"text",className:"form-control",id:"facilitator",defaultValue:"",required:"",onChange:a=>{$("#facilitator-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({facilitator:a.target.value})}}),e.jsx("div",{id:"facilitator-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"date",className:"form-label",children:"Date"}),e.jsx("input",{type:"date",className:"form-control",id:"date",defaultValue:"08:00",min:`${this.state.todayDate}`,required:"",onChange:a=>{console.log(a.target.value),this.setState({time_start:a.target.value}),$("#date-alert").removeAttr("class").addClass("invalid-feedback")}}),e.jsx("div",{id:"date-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:"time_start",className:"form-label",children:"Time Start"}),e.jsx("input",{type:"time",className:"form-control",id:"time_start",defaultValue:"08:00",min:"08:00",required:"",onChange:a=>{console.log(a.target.value),this.setState({time_start:a.target.value}),$("#time_start-alert").removeAttr("class").addClass("invalid-feedback")}}),e.jsx("div",{id:"time_start-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:"time_end",className:"form-label",children:"Time End"}),e.jsx("input",{type:"time",className:"form-control",id:"time_end",min:this.state.time_start,defaultValue:"08:00",required:"",onChange:a=>{$("#time_end-alert").removeAttr("class").addClass("invalid-feedback")}}),e.jsx("div",{id:"time_end-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"description",className:"form-label",children:"Description"}),e.jsx("textarea",{type:"text",className:"form-control",id:"description",defaultValue:"",required:"",onChange:a=>{$("#description-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({description:a.target.value})}}),e.jsx("div",{id:"description-alert",className:"invalid-feedback",children:"Please select a valid state."})]})]})})}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("button",{className:"btn btn-success float-right mr-1",onClick:()=>{this.saveData()},children:[" ",e.jsx("i",{className:"bi bi-save"})," Save"]}),e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})]})]})})}),e.jsx("div",{className:"modal fade",tabIndex:"-1",role:"dialog",id:"updateHoliday","aria-hidden":"true","data-bs-backdrop":"static",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title fs-5",children:"Update Event"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"grade",className:"form-label",children:"Select Type"}),e.jsxs("select",{name:"uholidayType",id:"uholidayType",className:"form-control",onChange:a=>{$("#uholidayType-alert").removeAttr("class").addClass("invalid-feedback"),a.target.value!=""&&this.setState({selectedGrade:a.target.value})},children:[e.jsx("option",{disabled:!0,children:"--Select Type--"}),e.jsx("option",{value:""}),e.jsx("option",{value:"Regular",children:"Regular"}),e.jsx("option",{value:"Special",children:"Special"}),e.jsx("option",{value:"Other",children:"Other"})]}),e.jsx("div",{id:"uholidayType-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"uevent_name",className:"form-label",children:"Event Name"}),e.jsx("input",{type:"text",className:"form-control",id:"uevent_name",defaultValue:"",required:"",onChange:a=>{$("#uevent_name-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({room:a.target.value})}}),e.jsx("div",{id:"uevent_name-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"ufacilitator",className:"form-label",children:"Facilitator "}),e.jsx("input",{type:"text",className:"form-control",id:"ufacilitator",defaultValue:"",required:"",onChange:a=>{$("#ufacilitator-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({facilitator:a.target.value})}}),e.jsx("div",{id:"ufacilitator-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"udate",className:"form-label",children:"Date"}),e.jsx("input",{type:"date",className:"form-control",id:"udate",defaultValue:"08:00",min:`${this.state.todayDate}`,required:"",onChange:a=>{console.log(a.target.value),this.setState({time_start:a.target.value}),$("#udate-alert").removeAttr("class").addClass("invalid-feedback")}}),e.jsx("div",{id:"udate-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:"utime_start",className:"form-label",children:"Time Start"}),e.jsx("input",{type:"time",className:"form-control",id:"utime_start",defaultValue:"08:00",min:"08:00",required:"",onChange:a=>{console.log(a.target.value),this.setState({time_start:a.target.value}),$("#utime_start-alert").removeAttr("class").addClass("invalid-feedback")}}),e.jsx("div",{id:"utime_start-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:"utime_end",className:"form-label",children:"Time End"}),e.jsx("input",{type:"time",className:"form-control",id:"utime_end",min:this.state.time_start,defaultValue:"08:00",required:"",onChange:a=>{$("#utime_end-alert").removeAttr("class").addClass("invalid-feedback")}}),e.jsx("div",{id:"utime_end-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"udescription",className:"form-label",children:"Description"}),e.jsx("textarea",{type:"text",className:"form-control",id:"udescription",defaultValue:"",required:"",onChange:a=>{$("#udescription-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({description:a.target.value})}}),e.jsx("div",{id:"udescription-alert",className:"invalid-feedback",children:"Please select a valid state."})]})]})})}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("button",{className:"btn btn-success float-right mr-1",onClick:()=>{this.updateData()},children:[" ",e.jsx("i",{className:"bi bi-save"})," Update"]}),e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})]})]})})})]})}}export{F as default};
