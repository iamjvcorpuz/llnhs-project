import{r as c,j as e,a as r,U as u}from"./app-MQ-yEurC.js";import{E as m}from"./EachMethod-DlQbtg5B.js";import{S as l}from"./sweetalert2.esm.all-DPJM2oV6.js";import"./index-B9Tcu3qw.js";import{R as h}from"./ReactTable-CiiRreiS.js";import{D as f}from"./DashboardLayout-Q83-rxtQ.js";import"./index-FTPeQx5Q.js";import"./Dropdown-DtFVle0_.js";import"./transition-CQN9Mefa.js";import"./index-DzSybp8L.js";class B extends c.Component{constructor(t){super(t),this.state={data:this.props.studentsList,columns:[{id:"no",accessor:"no",Header:"No.",width:100,className:"center"},{id:"picture",Header:"Picture",accessor:"photo",Cell:({row:a})=>e.jsx("img",{className:"",height:150,width:150,onError:s=>{s.target.src=a.original.sex=="Male"?"/adminlte/dist/assets/img/avatar.png":"/adminlte/dist/assets/img/avatar-f.jpeg"},alt:"Picture Error",src:a.original.photo!=null&&a.original.photo!=""?a.original.photo:a.original.sex=="Male"?"/adminlte/dist/assets/img/avatar.png":"/adminlte/dist/assets/img/avatar-f.jpeg"})},{id:"lrn",accessor:"lrn",Header:"LRN NO.",maxWidth:100},{id:"fullname",Header:"Fullname",width:800,accessor:"fullname"},{id:"Action",Header:"Status",width:200,accessor:"student_status",className:"center",Cell:({row:a})=>e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"btn btn-primary btn-block btn-sm col-12 mb-1",onClick:()=>{},children:[" ",e.jsx("i",{className:"bi bi-person"})," View Profile"]}),e.jsxs("a",{target:"_blank",href:`/student/${a.original.student_id}/print/id`,className:"btn btn-info btn-block btn-sm col-12 mb-1",onClick:()=>{},children:[" ",e.jsx("i",{className:"bi bi-printer"})," Print ID"]}),e.jsxs("button",{className:"btn btn-success btn-block btn-sm col-12 mb-1",onClick:()=>{window.open(`/student/${a.original.student_id}/print/grade`,"_blank")},children:[" ",e.jsx("i",{className:"bi bi-card-checklist"})," Grades "]})]})}]},this._isMounted=!1,this.loadStudentList=this.loadStudentList.bind(this),this.deleteStudent=this.deleteStudent.bind(this),console.log(this.props)}componentDidMount(){this._isMounted=!0}loadStudentList(){let t=[],a=this;r.get("/student").then(function(s){typeof s.status<"u"&&s.status=="200"&&(typeof s.data<"u"&&typeof s.data.data<"u"?s.data.data:[]).forEach((i,o,d)=>{i.status!="remove"&&t.push({no:o+1,id:i.id,photo:i.picture_base64,lrn:i.lrn,fullname:`${i.last_name}, ${i.first_name} ${i.extension_name!=null?i.extension_name:""} ${i.middle_name}`.toLocaleUpperCase(),level:"None",section:"None",sex:i.sex,status:i.status}),o+1==d.length&&a.setState({data:t})})}).catch(function(s){}).finally(function(){})}deleteStudent(t){l.fire({title:"Are you sure to remove this data?",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Yes",confirmButtonColor:"red",icon:"question",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(a=>{a.isConfirmed?(l.fire({title:`Removing Records.
Please wait.`,showCancelButton:!1,showConfirmButton:!1,allowOutsideClick:!1,didOpen:()=>{l.showLoading()}}),r.delete("/student",{data:{id:t}}).then(function(s){typeof s.status<"u"&&s.status=="201"?(typeof s.data<"u"&&typeof s.data<"u"?s.data:{}).status=="success"?l.fire({title:"Successfuly remove!",showCancelButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Ok",icon:"success",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(function(i){i.isConfirmed&&l.close()}):l.fire({title:"Fail to remove",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!1,closeOnClickOutside:!1,dangerMode:!0}):typeof s.status<"u"&&s.status=="200"&&(typeof s.data<"u"&&typeof s.data<"u"?s.data:{}).status=="data_not_exist"&&l.fire({title:"Data Not Exist",cancelButtonText:"Ok",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0})}).catch(function(s){console.log(s),l.fire({title:"Server Error",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0})})):l.close()})}render(){return e.jsxs(f,{title:"Student",user:this.props.auth.user,profile:this.props.auth.profile,children:[e.jsx("div",{className:"app-content-header",children:e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("h3",{className:"mb-0",children:[e.jsx("i",{className:"nav-icon bi bi-person-lines-fill"})," Student"]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("ol",{className:"breadcrumb float-sm-end",children:[e.jsxs("li",{className:"breadcrumb-item",children:[e.jsx("i",{className:"bi bi-speedometer mr-2"}),e.jsx(u,{href:"/admin/dashboard",children:"Dashboard"})]}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Student"})]})})]})})}),e.jsx("div",{className:"app-content",children:e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-lg-12",children:e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"row d-flex",children:[e.jsx("div",{className:"col-lg-2 me-auto",children:e.jsxs("h3",{className:"card-title mt-2 ",children:[" ",e.jsx("i",{className:"bi bi-person"})," Student List"]})}),e.jsx("div",{className:"col-lg-4",children:e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text",children:"School Year"}),e.jsxs("select",{className:"form-select",id:"gender",required:"",defaultValue:"",children:[e.jsx("option",{disabled:!0,children:"Choose..."}),e.jsx("option",{children:"All"}),e.jsx("option",{children:"2021-2022"}),e.jsx("option",{children:"2022-2023"}),e.jsx("option",{children:"2023-2024"}),e.jsx("option",{children:"2024-2025"}),e.jsx("option",{children:"2025-2026"})]})]})})]})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"mobile-hidden",children:e.jsx(h,{className:"table table-bordered table-striped ",data:this.state.data,columns:this.state.columns,showHeader:!0,showPagenation:!0,defaultPageSize:5},"react-tables")}),e.jsx("div",{className:"browser-hidden",children:e.jsx(m,{of:this.state.data,render:(t,a)=>e.jsxs("div",{className:"row mb-0",children:[e.jsx("div",{className:"col-sm-3 mr-0 pr-0",children:e.jsx("img",{className:"",height:100,width:100,onError:s=>{s.target.src=t.sex=="Male"?"/adminlte/dist/assets/img/avatar.png":"/adminlte/dist/assets/img/avatar-f.jpeg"},alt:"Picture Error",src:t.photo!=null&&t.photo!=""?t.photo:t.sex=="Male"?"/adminlte/dist/assets/img/avatar.png":"/adminlte/dist/assets/img/avatar-f.jpeg"})}),e.jsxs("div",{className:"col-sm-6 ml-0 pl-0",children:[e.jsx("div",{className:"row",children:e.jsxs("label",{children:["LRN: ",t.lrn]})}),e.jsx("div",{className:"row",children:e.jsxs("label",{children:["Name: ",t.fullname]})})]}),e.jsx("div",{className:"col-sm-3",children:e.jsxs("button",{className:"btn btn-primary btn-block btn-sm ",onClick:()=>{},children:[" ",e.jsx("i",{className:"bi bi-person"})," View Profile"]})}),e.jsx("hr",{className:"mt-3"})]})})})]})]})})})})})]})}}export{B as default};
