import{r as x,j as p}from"./app-MQ-yEurC.js";import{S as o}from"./sweetalert2.esm.all-DPJM2oV6.js";import"./index-FTPeQx5Q.js";import{g as y}from"./commonFunctions-DLOGa6Ui.js";import"./Dropdown-DtFVle0_.js";import"./index-DzSybp8L.js";import{E as z,a as W}from"./jspdf.plugin.autotable-CWwcz3KB.js";import"./browser-Bt5TlLty.js";import"./transition-CQN9Mefa.js";import"./typeof-QjJsDpFa.js";class D extends x.Component{constructor(t){super(t),this.state={code:"",lrn:"",picture:"",fullname1:"",lastname:"",track_strand:"",grade:"",section:"",sy:"",guardianname:"",relationship:"",guardiancontact:"",address:"",list:this.props.grades,getSchoolStats:typeof this.props.data.getSchoolStats<"u"&&this.props.data.getSchoolStats.length>0?this.props.data.getSchoolStats[0]:{},studentDetails:this.props.data.student,school:this.props.data.school},$("body").attr("class",""),this.generate=this.generate.bind(this),console.log(this.props)}componentDidMount(){$("#frame1").height(0),o.fire({title:"Generating Grade. Please wait.",showCancelButton:!1,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Download",cancelButtonText:"Close",icon:"info",showLoaderOnConfirm:!1,closeOnClickOutside:!1,dangerMode:!0,didOpen:()=>{o.showLoading()}});try{setTimeout(()=>{this.generate()},2e3)}catch(t){console.log(t)}}async generate(){o.close();try{let t=this,c="";const m=210.1;let a=t.state.getSchoolStats.lrn,d=t.state.getSchoolStats.last_name+", "+t.state.getSchoolStats.first_name+(t.state.getSchoolStats.extension_name!=null?" "+t.state.getSchoolStats.extension_name:" ")+t.state.getSchoolStats.middle_name,s=await y(t.state.studentDetails.bdate),h=t.state.getSchoolStats.sex,g=t.state.getSchoolStats.sy,w=t.state.getSchoolStats.grade+" "+t.state.getSchoolStats.section;const e=new z({compressPdf:!0});e.addFont("/fonts/arial/ARIALNB.TTF","Arial Narrow Bold","bold"),e.addFont("/fonts/arial/ArialMdm.ttf","Arial Medium","normal");let A=e.internal.pageSize.height||e.internal.pageSize.getHeight(),l=e.internal.pageSize.width||e.internal.pageSize.getWidth();e.addImage("/images/ic_launcher.png","PNG",169,10,24,24),e.addImage("/images/deped-d.png","PNG",15,10,24,24),e.setFont("Arial Medium","normal"),e.setFontSize(15),e.text("Republic of the Philippines",l/2,15,{align:"center"}),e.setFont("arial","normal"),e.setFontSize(18),e.text("DEPARTMENT OF EDUCATION",l/2,23,{align:"center"}),e.setFontSize(15),e.text(t.state.school.division,l/2,28,{align:"center"}),e.text(t.state.school.region,l/2,33,{align:"center"}),e.setFontSize(18),e.text(t.state.school.school_name,l/2,42,{align:"center"}),e.setFont("Arial Medium","normal"),e.setFontSize(9),e.text("School ID : "+t.state.school.school_id,l/2,47,{align:"center"}),e.setFontSize(18),e.text("LEARNER'S PROGRESS REPORT CARD",l/2,54,{align:"center"}),e.setFontSize(12),e.text("LRN : "+a,15,70,{align:"left"}),e.text("Name : "+d,15,75,{align:"left"}),e.text("Age : "+s,15,80,{align:"left"}),e.text("Sex : "+h,116,70,{align:"left"}),e.text("School Year : "+g,116,75,{align:"left"}),e.text("Grade & Section : "+w,116,80,{align:"left"});let f=[],r="",S=0;t.state.list.forEach((n,E,C)=>{let u="";n.q1!=null&&n.q2!=null&&n.q2!=null&&n.q2!=null&&(u=Math.trunc((Number(n.q1)+Number(n.q2)+Number(n.q3)+Number(n.q4))/4),r=r+(Number(n.q1)+Number(n.q2)+Number(n.q3)+Number(n.q4))/4,S++),f.push([{content:n.subject_name,styles:{halign:"left",minWidth:0,minCellHeight:0,cellWidth:80,fontSize:7}},{content:n.q1!=null?n.q1:"",styles:{halign:"center",minWidth:0,minCellHeight:0,cellWidth:15,fontSize:7}},{content:n.q2!=null?n.q2:"",styles:{halign:"center",minWidth:0,minCellHeight:0,cellWidth:15,fontSize:7}},{content:n.q3!=null?n.q3:"",styles:{halign:"center",minWidth:0,minCellHeight:0,cellWidth:15,fontSize:7}},{content:n.q4!=null?n.q4:"",styles:{halign:"center",minWidth:0,minCellHeight:0,cellWidth:15,fontSize:7}},{content:u,styles:{halign:"center",minWidth:0,minCellHeight:0,cellWidth:15,fontSize:7}},{content:"",styles:{halign:"center",minWidth:0,minCellHeight:0,fontSize:4}}]),S!=C.length&&(r="")}),W(e,{theme:"plain",startY:90,margin:10,useCss:!0,head:[[{content:"LEARNING AREAS",colSpan:1,rowSpan:3,styles:{halign:"center",valign:"middle",minCellHeight:0,fontSize:8,lineColor:1,lineWidth:.01}},{content:"QUARTERS",colSpan:4,rowSpan:2,styles:{halign:"center",fontSize:8,lineColor:1,lineWidth:.01,minCellHeight:12,cellPadding:2}},{content:"FINAL GRADE",colSpan:1,rowSpan:3,styles:{halign:"center",valign:"middle",fontSize:6,lineColor:1,lineWidth:.01,cellWidth:20}},{content:"REMARKS",colSpan:1,rowSpan:3,styles:{halign:"center",valign:"middle",fontSize:6,lineColor:1,lineWidth:.01,cellWidth:30}}],[],[{content:"1",styles:{halign:"center",valign:"middle",minCellHeight:0,fontSize:8}},{content:"2",styles:{halign:"center",valign:"middle",minCellHeight:0,fontSize:8}},{content:"3",styles:{halign:"center",valign:"middle",minCellHeight:0,fontSize:8}},{content:"4",styles:{halign:"center",valign:"middle",minCellHeight:0,fontSize:8}}]],headStyles:{lineColor:1,lineWidth:.01,minCellHeight:0,cellPadding:0},styles:{fontSize:8,lineColor:1,lineWidth:.01},body:f,foot:[[{content:"General Average",colSpan:5,rowSpan:2,styles:{halign:"right",fontSize:8,lineColor:1,lineWidth:.01,minCellHeight:12,cellPadding:2}},{content:r,colSpan:1,rowSpan:3,styles:{halign:"center",valign:"middle",fontSize:6,lineColor:1,lineWidth:.01,cellWidth:20}},{content:"",colSpan:1,rowSpan:3,styles:{halign:"center",valign:"middle",fontSize:6,lineColor:1,lineWidth:.01,cellWidth:30}}]],didDrawCell:function(n){n.column.index==0&&n.row.index<5&&n.row.section}});let N=e.internal.getNumberOfPages(),i=e.lastAutoTable.finalY+2;e.text(t.state.school.head_name,50,i+18,{align:"center"}),e.text(t.state.school.head_position,50,i+24,{align:"center"}),e.text("School Head",50,i+28,{align:"center"}),e.line(15,i+20,85,i+20),e.text(t.state.getSchoolStats.teacher_name,160,i+18,{align:"center"}),e.text("Adviser",160,i+24,{align:"center"}),e.line(120,i+20,195,i+20),$("#frame1").height(window.innerHeight-8),setTimeout(()=>{o.close(),$("#frame1").attr("src",e.output("bloburl"))},1e3)}catch(t){console.log(t),o.fire({title:"Cannot continue because info is not completed",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Download",cancelButtonText:"Close",icon:"error",showLoaderOnConfirm:!1,closeOnClickOutside:!1,dangerMode:!0}).then(c=>{window.close()})}}browser_check_preview(){let t=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,c=typeof InstallTrigger<"u",m=/constructor/i.test(window.HTMLElement)||function(g){return g.toString()==="[object SafariRemoteNotification]"}(!window.safari||typeof safari<"u"&&safari.pushNotification),a=!!document.documentMode,d=!a&&!!window.StyleMedia,s=!!window.chrome&&(!!window.chrome.webstore||!!window.chrome.runtime),h=(s||t)&&!!window.CSS;return t?0:c||m?1:0}render(){return p.jsx("div",{className:"",children:p.jsx("iframe",{id:"frame1",src:"#view=FitH&toolbar=0",width:"100%",height:"100%"})})}}export{D as default};
