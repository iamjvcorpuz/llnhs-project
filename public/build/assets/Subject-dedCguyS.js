import{r,j as e,U as u}from"./app-MQ-yEurC.js";import{S as a}from"./sweetalert2.esm.all-DPJM2oV6.js";import{R as f}from"./ReactTable-CiiRreiS.js";import{D as m}from"./DashboardLayout-Q83-rxtQ.js";import"./index-FTPeQx5Q.js";import"./Dropdown-DtFVle0_.js";import"./transition-CQN9Mefa.js";import"./index-DzSybp8L.js";class O extends r.Component{constructor(s){super(s),this.state={data:[],columns:[{id:"index",accessor:"index",Header:"No.",width:50,className:"center"},{id:"subject_name",accessor:"subject_name",Header:"Subject Name",maxWidth:800},{id:"description",Header:"Decription",width:200,accessor:"description"},{id:"action",Header:"Status",width:80,accessor:"index",className:"center",Cell:({row:l})=>e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"btn btn-danger btn-block btn-sm col-12 mb-1",onClick:()=>{this.deleteSubject(l.original.id)},children:[" ",e.jsx("i",{className:"bi bi-person-fill-x"})," Remove"]}),e.jsxs("button",{onClick:()=>{this.selectSubject(l.original)},className:"btn btn-primary btn-block btn-sm col-12 mb-1",children:[" ",e.jsx("i",{className:"bi bi-pen"})," Edit"]})]})}],selectedSubject:{}},this.deleteSubject=this.deleteSubject.bind(this),this.selectSubject=this.selectSubject.bind(this),this._isMounted=!1}componentDidMount(){this._isMounted=!0,this.setState({data:this.props.subjects})}selectSubject(s){$("#usubject").val(s.subject_name),$("#udescription").val(s.description),this.setState({selectedSubject:s},()=>{$("#updateSubject").modal("show")})}getAllData(){let s=this;axios.get("/subject").then(function(l){if(console.log(l),typeof l.status<"u"&&l.status=="200"){let o=typeof l.data<"u"&&typeof l.data<"u"?l.data:{};Object.keys(o).length>0&&s.setState({data:o})}})}saveData(){let s=this,l=$("#subject").val(),o=$("#description").val();o!=""&&l!=""?a.fire({title:"If all fields are correct and please click to continue to save",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Continue",icon:"warning",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(i=>{if(i.isConfirmed){a.fire({title:`Saving Records.
Please wait.`,html:'<i class="fa fa-times-circle-o"></i>&nbsp;&nbsp;Close',showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,didOpen:()=>{a.showLoading()}});let n={subject_name:l,description:o};console.log(n),axios.post("/subject",n).then(async function(t){console.log(t),typeof t.status<"u"&&t.status=="201"?(typeof t.data<"u"&&typeof t.data<"u"?t.data:{}).status=="sucess"?a.fire({title:"Successfuly save!",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Continue",icon:"success",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(function(d){d.isConfirmed&&(a.close(),$("#newSubject").modal("hide"),s.getAllData())}):a.fire({title:"Fail to save",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!1,closeOnClickOutside:!1,dangerMode:!0}):typeof t.status<"u"&&t.status=="200"?(typeof t.data<"u"&&typeof t.data<"u"?t.data:{}).status=="data_exist"&&a.fire({title:"Data Exist",cancelButtonText:"Ok",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}):typeof t.status<"u"&&t.status=="422"}).catch(function(t){console.log(t),a.fire({title:"Server Error",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0})})}else i.isDismissed;return!1}):(l==""&&($("#subject_name-alert").removeAttr("class"),$("#subject_name-alert").html("Required Field"),$("#subject_name-alert").addClass("d-block invalid-feedback")),o==""&&($("#description-alert").removeAttr("class"),$("#description-alert").html("Required Field"),$("#description-alert").addClass("d-block invalid-feedback")))}updateData(){let s=this,l=$("#usubject").val(),o=$("#udescription").val();o!=""&&l!=""?a.fire({title:"If all fields are correct and please click to continue to save",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Continue",icon:"warning",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(i=>{if(i.isConfirmed){a.fire({title:`Saving Records.
Please wait.`,html:'<i class="fa fa-times-circle-o"></i>&nbsp;&nbsp;Close',showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,didOpen:()=>{a.showLoading()}});let n={id:s.state.selectedSubject.id,subject_name:l,description:o};console.log(n),axios.post("/subject/update",n).then(async function(t){console.log(t),typeof t.status<"u"&&t.status=="201"?(typeof t.data<"u"&&typeof t.data<"u"?t.data:{}).status=="success"?a.fire({title:"Successfuly save!",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Continue",icon:"success",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(function(d){d.isConfirmed&&(a.close(),$("#updateSubject").modal("hide"),s.getAllData())}):a.fire({title:"Fail to save",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!1,closeOnClickOutside:!1,dangerMode:!0}):typeof t.status<"u"&&t.status=="200"?(typeof t.data<"u"&&typeof t.data<"u"?t.data:{}).status=="data_exist"&&a.fire({title:"Data Exist",cancelButtonText:"Ok",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}):typeof t.status<"u"&&t.status=="422"}).catch(function(t){console.log(t),a.fire({title:"Server Error",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0})})}else i.isDismissed;return!1}):(l==""&&($("#usubject_name-alert").removeAttr("class"),$("#usubject_name-alert").html("Required Field"),$("#usubject_name-alert").addClass("d-block invalid-feedback")),o==""&&($("#udescription-alert").removeAttr("class"),$("#udescription-alert").html("Required Field"),$("#udescription-alert").addClass("d-block invalid-feedback")))}deleteSubject(s){let l=this;a.fire({title:"Are you sure to remove this data?",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Yes",confirmButtonColor:"red",icon:"question",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(o=>{o.isConfirmed?(a.fire({title:`Removing Records.
Please wait.`,showCancelButton:!1,showConfirmButton:!1,allowOutsideClick:!1,didOpen:()=>{a.showLoading()}}),console.log(s),axios.delete("/subject",{data:{id:s}}).then(function(i){console.log(i),typeof i.status<"u"&&i.status=="201"?(typeof i.data<"u"&&typeof i.data<"u"?i.data:{}).status=="sucess"?(l.getAllData(),a.fire({title:"Successfuly remove!",showCancelButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Ok",icon:"success",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0}).then(function(t){t.isConfirmed&&a.close()})):a.fire({title:"Fail to remove",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!1,closeOnClickOutside:!1,dangerMode:!0}):typeof i.status<"u"&&i.status=="200"&&(typeof i.data<"u"&&typeof i.data<"u"?i.data:{}).status=="data_not_exist"&&a.fire({title:"Data Not Exist",cancelButtonText:"Ok",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0})}).catch(function(i){console.log(i),a.fire({title:"Server Error",showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,cancelButtonText:"Ok",confirmButtonText:"Continue",confirmButtonColor:"#DD6B55",icon:"error",showLoaderOnConfirm:!0,closeOnClickOutside:!1,dangerMode:!0})})):a.close()})}render(){return e.jsxs(m,{title:"Student",user:this.props.auth.user,children:[e.jsxs("div",{className:"noselect",children:[e.jsx("div",{className:"app-content-header",children:e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("h3",{className:"mb-0",children:[e.jsx("i",{className:"nav-icon bi bi-person-lines-fill"})," Subjects"]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("ol",{className:"breadcrumb float-sm-end",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(u,{href:"/admin/dashboard",children:"Dashboard"})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Subjects"})]})})]})})}),e.jsx("div",{className:"app-content",children:e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-lg-12",children:e.jsxs("div",{className:"card mb-4 ",children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("h3",{className:"card-title",children:[" ",e.jsx("i",{className:"bi bi-list-th"})," Track"]}),e.jsxs("button",{className:"btn btn-primary float-right mr-1",onClick:()=>{$("#newSubject").modal("show")},children:[" ",e.jsx("i",{className:"bi bi-person-plus-fill"})," Add"]})]}),e.jsx("div",{className:"card-body p-0",children:e.jsx(f,{className:"table table-bordered table-striped ",data:this.state.data,columns:this.state.columns},"react-tables")})]})})})})})]}),e.jsx("div",{className:"modal fade",tabIndex:"-1",role:"dialog",id:"newSubject","aria-hidden":"true","data-bs-backdrop":"static",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title fs-5",children:"Create"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"subject",className:"form-label",children:"Subject Name"}),e.jsx("input",{type:"text",className:"form-control",id:"subject",defaultValue:"",required:"",onChange:s=>{$("#subject-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({subject:s.target.value})}}),e.jsx("div",{id:"subject-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"description",className:"form-label",children:"Description"}),e.jsx("textarea",{type:"text",className:"form-control",id:"description",defaultValue:"",required:"",onChange:s=>{$("#description-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({description:s.target.value})}}),e.jsx("div",{id:"description-alert",className:"invalid-feedback",children:"Please select a valid state."})]})]})})}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("button",{className:"btn btn-success float-right mr-1",onClick:()=>{this.saveData()},children:[" ",e.jsx("i",{className:"bi bi-save"})," Save"]}),e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})]})]})})}),e.jsx("div",{className:"modal fade",tabIndex:"-1",role:"dialog",id:"updateSubject","aria-hidden":"true","data-bs-backdrop":"static",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title fs-5",children:"Update Subject"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"usubject",className:"form-label",children:"Subject Name"}),e.jsx("input",{type:"text",className:"form-control",id:"usubject",defaultValue:"",required:"",onChange:s=>{$("#usubject-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({subject:s.target.value})}}),e.jsx("div",{id:"usubject-alert",className:"invalid-feedback",children:"Please select a valid state."})]}),e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"udescription",className:"form-label",children:"Description"}),e.jsx("textarea",{type:"text",className:"form-control",id:"udescription",defaultValue:"",required:"",onChange:s=>{$("#udescription-alert").removeAttr("class").addClass("invalid-feedback"),this.setState({description:s.target.value})}}),e.jsx("div",{id:"udescription-alert",className:"invalid-feedback",children:"Please select a valid state."})]})]})})}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("button",{className:"btn btn-success float-right mr-1",onClick:()=>{this.updateData()},children:[" ",e.jsx("i",{className:"bi bi-save"})," Save"]}),e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})]})]})})})]})}}export{O as default};
